<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<a4j:keepAlive beanName="consultaPolizasController" />
<head>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
<style type="text/css">
.celda {
	width: 150px;
	color: #000;
}

.datatable {
	padding-top: 10px;
}

body {
	font-family: Monaco, Georgia, Times, serif;
}

.separador {
	padding: 0px 17px;
}

#consultar {
	text-align: left;
}
</style>
</head>
<body>
	<h:form>

		<rich:panel id="consultar" height="100%">
			<f:facet name="header">
				<h:outputText value="Call Center > Consulta de Polizas" />
			</f:facet>
			<center>
				<div style="text-align: center;">
					<h:panelGrid columns="5">
						<h:column>
							<h:outputText value="#{consultaPolizasController.errorDocu}" style="color: red;" />
						</h:column>
						<h:column>
							<h:outputText value="Num. Documento" />
						</h:column>
						<h:column>
							<h:inputText id="numdoc2" value="#{consultaPolizasController.docu}" maxlength="11" class="celda" onkeypress="return valNumeros(event)" />
						</h:column>
						<h:column>
							<a4j:commandButton action="#{consultaPolizasController.buscarTerceroPolizas}" reRender="listaTerceroPolizas,listaDetallesPoliza"
								value="Consultar" style=" width : 81px;" />
						</h:column>
						<h:column>
							<h:commandButton action="#{consultaPolizasController.limpiar}" immediate="true" value="Limpiar" />
						</h:column>
					</h:panelGrid>

				</div>

				<!-- <span class="separador"><a4j:commandButton	action="#{consultaPolizasController.guardar}" reRender="lista" value="Ingresar"/></span> -->

				<fieldset id="formPolizas" style="margin-bottom: 20px; padding-left: 0px; padding-right: 0px;">
					<legend>Polizas</legend>
					<div class="datatable">
						<rich:extendedDataTable id="listaTerceroPolizas" var="regPoliza" value="#{consultaPolizasController.listaTerceroPolizas}" width="900px"
							rows="12" height="150px" selection="#{consultaPolizasController.selection}" selectionMode="single">
							<a4j:support id="selectionPoliza" action="#{consultaPolizasController.cargaDetallesPoliza}" event="onselectionchange"
								reRender="listaDetallesPoliza" />
							<rich:column id="colNumDoc" headerClass="dataTableHeader" width="7%" sortable="true" sortBy="#{regPoliza.codeIdentifier}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Num. Doc." />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.numdoc}" />

								</center>
							</rich:column>
							<rich:column id="colAsegurado" headerClass="dataTableHeader" width="20%" sortable="true" sortBy="#{regPoliza.name}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Cliente" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.asegurado}" />
								</center>
							</rich:column>

							<rich:column id="colEstado" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{regPoliza.estado}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Estado" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.estado}" />
								</center>
							</rich:column>

							<rich:column id="colContratante" headerClass="dataTableHeader" width="20%" sortable="true" sortBy="#{regPoliza.contratante}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Socio" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.contratante}" />
								</center>
							</rich:column>

							<rich:column id="colProducto" headerClass="dataTableHeader" width="12%" sortable="true" sortBy="#{regPoliza.producto}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Producto" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.producto}" />
								</center>
							</rich:column>

							<rich:column id="colNumPoliza" headerClass="dataTableHeader" width="17%" sortable="true" sortBy="#{regPoliza.numPoliza}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Num. de Poliza" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.numPoliza}" />
								</center>
							</rich:column>
							<rich:column id="colFecInicio" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{regPoliza.fec_inicio}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Fec. Inicio" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.fecInicio}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</center>
							</rich:column>
							<rich:column id="colFecFin" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{regPoliza.fec_fin}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Fec. Fin" />
								</f:facet>
								<center>
									<h:outputText value="#{regPoliza.fecFin}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</center>
							</rich:column>


						</rich:extendedDataTable>
					</div>
				</fieldset>

				<fieldset id="formItemsPoliza">
					<legend>Open Items</legend>
					<div class="datatable">

						<rich:extendedDataTable id="listaDetallesPoliza" var="regOpenItem" value="#{consultaPolizasController.listaDetallesPoliza}" width="900px"
							rows="12" height="250px" selectionMode="single" reRender="true">

							<rich:column id="colNumPoliza" headerClass="dataTableHeader" width="25%" sortable="true" sortBy="#{consultaPolizasController.numPoliza}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Numero de Poliza" />
								</f:facet>
								<center>
									<h:outputText value="#{consultaPolizasController.numPoliza}" />
								</center>
							</rich:column>
							<rich:column id="colTipo" headerClass="dataTableHeader" width="16%" sortable="true" sortBy="#{regOpenItem.tipo}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Tipo" />
								</f:facet>
								<center>
									<h:outputText value="#{regOpenItem.tipo}" />
								</center>
							</rich:column>

							<rich:column id="colFecha" headerClass="dataTableHeader" width="15%" sortable="true" sortBy="#{regOpenItem.fecha}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Fecha" />
								</f:facet>
								<center>
									<h:outputText value="#{regOpenItem.fecha}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</center>
							</rich:column>



							<rich:column id="colFecVen" headerClass="dataTableHeader" width="18%" sortable="true" sortBy="#{regOpenItem.fecVenc}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Fecha de Vencimiento" />
								</f:facet>
								<center>
									<h:outputText value="#{regOpenItem.fecVenc}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</center>
							</rich:column>

							<rich:column id="colIncremento" headerClass="dataTableHeader" width="13%" sortable="true" sortBy="#{regOpenItem.monto}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Incremento" />
								</f:facet>
								<center>
									<h:outputText value="#{regOpenItem.monto}" />
								</center>
							</rich:column>
							<rich:column id="colMoneda" headerClass="dataTableHeader" width="13%" sortable="true" sortBy="#{regOpenItem.moneda}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Moneda" />
								</f:facet>
								<center>
									<h:outputText value="#{regOpenItem.moneda}" />
								</center>
							</rich:column>


						</rich:extendedDataTable>
					</div>
				</fieldset>

			</center>
		</rich:panel>
		<a4j:include viewId="/paginas/error.xhtml" />
	</h:form>

</body>


</html>