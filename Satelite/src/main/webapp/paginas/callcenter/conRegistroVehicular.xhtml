<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<a4j:keepAlive beanName="registroVehicularController" />
<head>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
<style type="text/css">
.celda {
	width: 150px;
	color: #000;
}

.datatable {
	padding-top: 10px;
}

body {
	font-family: Monaco, Georgia, Times, serif;
}

.separador {
	padding: 0px 17px;
}

#consultar {
	text-align: left;
}
</style>
</head>
<body>
	<h:form>

		<rich:panel id="consultar" height="100%">
			<f:facet name="header">
				<h:outputText value="Call Center > Registro Vehicular" />
			</f:facet>
			<center>
				<fieldset id="formVehiculo">
					<legend>
						<h:outputText value="Datos del Vehículo" />
					</legend>
					<div style="text-align: center;">
						<h:panelGrid columns="8" cellpadding="5">

							<h:column>
								<h:outputText value="Socio" />
							</h:column>

							<h:column>
								<h:selectOneMenu id="socio" value="#{registroVehicularController.socio}" style=" width : 153px;" required="true" requiredMessage="Obligatorio">
									<f:selectItems value="#{registroVehicularController.socioItems}" />
								</h:selectOneMenu>
							</h:column>

							<h:column>
								<rich:message for="socio" style="color: red;">
									<f:facet name="errorMarker">
										<h:graphicImage url="../imagenes/error.png" />
									</f:facet>
								</rich:message>
							</h:column>
							<h:column>
								<h:outputText value="Placa" />
							</h:column>
							<h:column>
								<!-- Se modifica el maxlength="6" a valor numero 7 esto para las placa como motos que tiene mas caracteres-->
								<h:inputText id="placa" required="true" requiredMessage="Obligatorio" value="#{registroVehicularController.vehiculoPe.placa}" maxlength="7"
									class="celda" onkeyup="value=value.toUpperCase()" onkeydown="return valNumerosLetras(event)" />
							</h:column>

							<h:column>
								<rich:message for="placa" style="color: red;">
									<f:facet name="errorMarker">
										<h:graphicImage url="../imagenes/error.png" />
									</f:facet>
								</rich:message>
							</h:column>


							<h:column>
								<a4j:commandButton action="#{registroVehicularController.buscarPlaca}"
									reRender="lista, registrar, editar, numDocumento, nombres, apPaterno, apMaterno, email, fechaNac" value="Buscar Placa" />
							</h:column>
							<h:column>
								<h:commandButton action="#{registroVehicularController.limpiarPlaca}" immediate="true" value="Limpiar" />
							</h:column>
						</h:panelGrid>
					</div>
					<div class="datatable">
						<rich:extendedDataTable id="lista" var="regVehicular" value="#{registroVehicularController.listaConsultaRegVehicular}" width="980px" rows="12"
							height="330px" selection="#{registroVehicularController.selection}" selectionMode="single" reRender="true">
							<a4j:support id="selectionBtnEditar" action="#{registroVehicularController.cambiarEstado}" event="onselectionchange" reRender="editar" />
							<rich:column id="colPropietario" headerClass="dataTableHeader" width="08%" sortable="true" sortBy="#{regVehicular.propietario}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="DNI Propietario" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.propietario}" />

								</center>
							</rich:column>
							<rich:column id="colMarca" headerClass="dataTableHeader" width="12%" sortable="true" sortBy="#{regVehicular.marca}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Marca" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.marca}" />
								</center>
							</rich:column>

							<rich:column id="colModelo" headerClass="dataTableHeader" width="13%" sortable="true" sortBy="#{regVehicular.modelo}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Modelo" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.modelo}" />
								</center>
							</rich:column>

							<rich:column id="colSerie" headerClass="dataTableHeader" width="14%" sortable="true" sortBy="#{regVehicular.serie}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Serie" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.serie}" />
								</center>
							</rich:column>

							<rich:column id="colFabricacion" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{regVehicular.anioFabricacion}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Año Fab." />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.anioFabricacion}" />
								</center>
							</rich:column>
							<rich:column id="colUso" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{regVehicular.uso}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Uso" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.uso}" />
								</center>
							</rich:column>
							<rich:column id="colCategoria" headerClass="dataTableHeader" width="14%" sortable="true" sortBy="#{regVehicular.categoria}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Categoría" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.categoria}" />
								</center>
							</rich:column>
							<rich:column id="colNroAsiento" headerClass="dataTableHeader" width="7%" sortable="true" sortBy="#{regVehicular.nroAsiento}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Asientos" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.nroAsiento}" />
								</center>
							</rich:column>
							<rich:column id="colDepartamento" headerClass="dataTableHeader" width="15%" sortable="true" sortBy="#{regVehicular.departamento}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Departamento" />
								</f:facet>
								<center>
									<h:outputText value="#{regVehicular.departamento}" />
								</center>
							</rich:column>
							<f:facet name="footer">
								<rich:datascroller id="ds" for="lista" maxPages="10"></rich:datascroller>
							</f:facet>
						</rich:extendedDataTable>

						<span class="separador"> <a4j:commandButton id="registrar" action="#{registroVehicularController.insertar}"
								oncomplete="#{facesContext.maximumSeverity == null ? 'Richfaces.showModalPanel(\'panelMantenimiento\')' : ';'}" value="Registrar"
								reRender="panelMantenimiento" disabled="#{!registroVehicularController.flagVehiculo}" />
						</span> <span class="separador"> <a4j:commandButton action="#{registroVehicularController.actualizar}" id="editar"
								oncomplete="#{facesContext.maximumSeverity == null ? 'Richfaces.showModalPanel(\'panelMantenimiento\')' : ';'}"
								disabled="#{!registroVehicularController.estBtnEditar}" value="Editar"
								reRender="panelMantenimiento,numDocumento,nombres,apPaterno,apMaterno,email,fechaNac" /></span>
					</div>
				</fieldset>
			</center>
		</rich:panel>
	</h:form>

</body>

<rich:modalPanel id="panelMantenimiento" autosized="true" moveable="true">
	<f:facet name="controls">
		<h:panelGroup>
			<h:graphicImage value="/imagenes/close.gif" styleClass="hidelink" id="hidelink" />
			<rich:componentControl for="panelMantenimiento" attachTo="hidelink" operation="hide" event="onclick" />
		</h:panelGroup>
	</f:facet>
	<h:form>
		<a4j:region>
			<a4j:include viewId="/paginas/callcenter/manRegistroVehicular.xhtml" />
		</a4j:region>
	</h:form>
</rich:modalPanel>

</html>