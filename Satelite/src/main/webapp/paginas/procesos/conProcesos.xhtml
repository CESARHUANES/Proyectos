<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<a4j:keepAlive beanName="procesosController" />
<head>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
</head>
<body>
	<h:form>
		<rich:panel id="consultar" height="100%">
			<f:facet name="header">
				<h:outputText value="Procesos >  Consultar Procesos" />
			</f:facet>
			<table>
				<tr>
					<td width="18%" align="right"><h:outputText value="Tipo:" /></td>
					<td width="20%" align="left"><h:selectOneMenu id="tipProceso" value="#{procesosController.tipoProceso}">
							<f:selectItems value="#{procesosController.tiposProcesosItems}" />

						</h:selectOneMenu></td>
					<td width="5%" align="center"></td>
					<td width="15%" align="right"><h:outputText value="Estado:" /></td>
					<td width="20%" align="left"><h:selectOneMenu id="estado" value="#{procesosController.estadoProceso}">
							<f:selectItems value="#{procesosController.estadosItems}" />
						</h:selectOneMenu></td>
					<td width="5%" align="center"></td>
					<td width="15%" align="center"></td>
					<td width="2%" align="center"></td>
				</tr>
				<tr>
					<td align="right"><h:outputText value="Fecha de Inicio:" /></td>
					<td align="left"><rich:calendar id="dateIni" datePattern="yyyy-MM-dd" value="#{procesosController.fechaIni}">
						</rich:calendar></td>
					<td align="center"></td>
					<td align="right"><h:outputText value="Fecha de Fin:" /></td>
					<td align="left"><rich:calendar id="dateFin" datePattern="yyyy-MM-dd" value="#{procesosController.fechaFin}">
						</rich:calendar></td>
					<td align="center"></td>
					<td align="left" colspan="2"><a4j:commandButton action="#{procesosController.consultarProcesos}" reRender="lista" value="Consultar"></a4j:commandButton></td>
					<td align="center"></td>
				</tr>
				<tr>
					<td colspan="2" height="10px"></td>
				</tr>
			</table>
			<rich:extendedDataTable id="lista" var="proc" value="#{procesosController.listaProcesos}" width="850px" rows="12" height="330px"
				selection="#{procesosController.selection}" selectionMode="single">
				<rich:column id="tipo" headerClass="dataTableHeader" width="24%" sortable="true" sortBy="#{proc.tipo}" sortIconAscending="dataTableAscIcon"
					sortIconDescending="dataTableDescIcon">
					<f:facet name="header">
						<h:outputText value="Tipo" />
					</f:facet>
					<center>
						<h:outputText value="#{proc.tipo}" />
					</center>
				</rich:column>
				<!-- 			<rich:column id="nombre" headerClass="dataTableHeader" width="22%"
					sortable="true" sortBy="#{proc.nombre}"
					sortIconAscending="dataTableAscIcon"
					sortIconDescending="dataTableDescIcon">
					<f:facet name="header">
						<h:outputText value="Nombre" />
					</f:facet>
					<h:outputText value="#{proc.nombre}" />
				</rich:column>  -->
				<rich:column id="fechaIni" headerClass="dataTableHeader" width="15%" sortable="true" sortBy="#{proc.fechaIni}"
					sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
					<f:facet name="header">
						<h:outputText value="Fecha de Inicio" />
					</f:facet>
					<center>
						<h:outputText value="#{proc.fechaIni}">
							<!-- <f:convertDateTime /> -->
							<f:convertDateTime timeZone="America/Lima" pattern="dd/MM/yyyy HH:mm:ss"></f:convertDateTime>
						</h:outputText>
					</center>
				</rich:column>
				<rich:column id="fechaFin" headerClass="dataTableHeader" width="15%" sortable="true" sortBy="#{proc.fechaFin}"
					sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
					<f:facet name="header">
						<h:outputText value="fecha de Fin" />
					</f:facet>
					<center>
						<h:outputText value="#{proc.fechaFin}">
							<f:convertDateTime timeZone="America/Lima" pattern="dd/MM/yyyy HH:mm:ss"></f:convertDateTime>
						</h:outputText>
					</center>
				</rich:column>
				<rich:column id="estado" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{proc.estado}" sortIconAscending="dataTableAscIcon"
					sortIconDescending="dataTableDescIcon">
					<f:facet name="header">
						<h:outputText value="Estado" />
					</f:facet>
					<center>
						<h:outputText value="#{proc.estado}" />
					</center>
				</rich:column>
				<!-- 			<rich:column id="linkArchivos" headerClass="dataTableHeader"
					width="10%">
					<f:facet name="header">
						<h:outputText value="Descargar" />
					</f:facet>
					<h:commandLink value="#{proc.nombreArchivo}" 
							actionListener="#{procesosController.descargarZip}">
							<f:attribute name="path" value="#{proc.pathArchivos}" /> 		
					</h:commandLink>
				</rich:column>  -->
				<rich:column id="errorDescrip" headerClass="dataTableHeader" width="40%" sortable="true" sortBy="#{proc.estado}"
					sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
					<f:facet name="header">
						<h:outputText value="Descripcion del Error" />
					</f:facet>
					<h:outputText value="#{proc.descripcionError}" />
				</rich:column>

				<f:facet name="footer">
					<rich:datascroller id="ds" for="lista" maxPages="10"></rich:datascroller>
				</f:facet>
			</rich:extendedDataTable>
		</rich:panel>

	</h:form>
</body>
</html>