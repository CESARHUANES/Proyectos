<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="repConsultaSBSController" />
	
	
	<head>
	<style type="text/css">
			body, html {
			.input:disabled {background-color:blue;}
				}
		</style>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />	
	</head>
	<body>
		<h:form id="formRepConsultaSBSStep2_A">
			<div style="text-align: center;">
				<table style="margin: 0 auto; width: 1030px;" border="0">
					<tr>
						<td colspan="3" style="text-align: left; padding-bottom: 15px;">
							<h:outputText value="Generar Reporte SBS" style="text-align: left; font-weight: bold;" />
						</td>
					</tr>
					<tr>
						<a4j:region>
							<td style="text-align: right; width: 25%;">
								<rich:message for="idTipoAnexoStep2" style="color: red;">
									<f:facet name="errorMarker">
										<h:graphicImage url="../imagenes/error.png" />
									</f:facet>
								</rich:message>
								<rich:spacer width="2" /><h:outputText value="Tipo Anexo: " />
							</td>
							<td style="text-align: left; width: 30%;">
								<h:selectOneMenu id="idTipoAnexoStep2" value="#{repConsultaSBSController.idTipoAnexoStep2}" style=" width: 190px;" valueChangeListener="#{repConsultaSBSController.buscarPeriodoStep2}"
									disabled="#{repConsultaSBSController.disabledComponentes}" required="true" requiredMessage="">
									<f:selectItems value="#{repConsultaSBSController.comboListaTipoAnexoStep2}" />
									<a4j:support  event="onchange"  reRender="idPeriodoStep2, tipoCambioUSD,tcambi" />
								</h:selectOneMenu>
							</td>
							<td>&nbsp;</td>
						</a4j:region>
					</tr>
					<tr>
						<td style="text-align: right; width: 25%;">
							<rich:message for="anioStep2" style="color: red;">
								<f:facet name="errorMarker">
									<h:graphicImage url="../imagenes/error.png" />
								</f:facet>
							</rich:message>
							<rich:spacer width="2" /><h:outputText value="Año: " />
						</td>
						<td style="text-align: left; width: 30%;">
							<h:selectOneMenu id="anioStep2" value="#{repConsultaSBSController.anioStep2}" style=" width: 95px;" disabled="#{repConsultaSBSController.disabledComponentes}"
								required="true" requiredMessage="">
								<f:selectItems value="#{repConsultaSBSController.comboListaAnioStep2}" />
							</h:selectOneMenu>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td style="text-align: right; width: 25%;">
							<rich:message for="idPeriodoStep2" style="color: red;">
								<f:facet name="errorMarker">
									<h:graphicImage url="../imagenes/error.png" />
								</f:facet>
							</rich:message>
							<rich:spacer width="2" /><h:outputText value="Periodo: " />
						</td>
						<td style="text-align: left; width: 30%;">
							<h:selectOneMenu id="idPeriodoStep2" value="#{repConsultaSBSController.idPeriodoStep2}" style="width: 150px;" disabled="#{repConsultaSBSController.disabledComponentes}"
								required="true" requiredMessage="">
								<f:selectItem itemValue="" itemLabel="- Seleccione -" />
								<f:selectItems value="#{repConsultaSBSController.comboListaPeriodoStep2}" />
							</h:selectOneMenu>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td style="text-align: right; width: 25%;">
							<rich:message for="tipoCambioUSD" style="color: red;">
								<f:facet name="errorMarker">
									<h:graphicImage url="../imagenes/error.png" />
								</f:facet>
							</rich:message>
							<rich:spacer width="2" />
							<h:outputText value="Tipo de Cambio:" id="tcambi"  style="display:#{(repConsultaSBSController.btntipocambio == true) ? 'block' : 'none'}"/>
						</td>
						<td style="text-align: left; width: 30%;">
							<h:inputText id="tipoCambioUSD" value="#{repConsultaSBSController.tipoCambioUSD}"  maxlength="5"
								style="display:#{(repConsultaSBSController.btntipocambio == true) ? 'block' : 'none'}" onkeypress="return valDecimales(event);" 
								required="#{repConsultaSBSController.validarTipoCambioUSD}"  requiredMessage="">
								</h:inputText>
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td style="text-align: left; width: 30%; padding-top: 20px;">
							<a4j:commandButton id="generar" action="#{repConsultaSBSController.procesoGenerarReporte}" value="> Generar" style="width: 75px;" 
								render="true" reRender="idTipoAnexoStep2, anioStep2, idPeriodoStep2, tipoCambioUSD, generar, exportar, confirmar" 
								disabled="#{repConsultaSBSController.disabledBtnGenerar}" />
						</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td style="text-align: left; width: 30%; padding-top: 2px;">
							<h:commandButton id="exportar" action="#{repConsultaSBSController.exportarReporte}" value="> Exportar"
								style="width: 75px; visibility: #{repConsultaSBSController.shownSubBotones ? 'visible' : 'hidden'};" />
							<a4j:commandButton id="confirmar" action="#{repConsultaSBSController.confirmarReporte}"	onclick="this.disabled=true"
								oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelSuccess\');this.disabled=false;' : 'this.disabled=false;'}"							
								value="> Confirmar SBS" style="visibility: #{repConsultaSBSController.shownSubBotones ? 'visible' : 'hidden'};" render="true" reRender="panelSuccess" />
						</td>
						<td>&nbsp;</td>
					</tr>
				</table>
			</div>
		</h:form>
		
		<h:form id="formRepConsultaSBSStep2_B">
			<div style="position: absolute; top: 273px;">
				<a4j:commandButton action="#{repConsultaSBSController.volverPantallaPrincipal}" value="> Volver" 
					reRender="panelStep1, panelStep2, tituloCabecera" render="true" />
			</div>
		</h:form>
		
		<rich:modalPanel id="panelSuccess" width="250" height="130">
			<f:facet name="header">
				<h:outputText value="Mensaje" />
			</f:facet>
			<h:panelGroup>
				<h:form>
					<center>
						<h5>
							<h:outputText value="La confirmación del Reporte SBS fue satisfactoria!" />
						</h5>
						<h:commandButton action="#{repConsultaSBSController.volverPantallaPrincipal}" value="Aceptar" render="true" />
					</center>
				</h:form>
			</h:panelGroup>
		</rich:modalPanel>
	</body>
</html>