<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">

<a4j:keepAlive beanName="conCertificadoRetencionController" />
<head>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />

<style type="text/css">
body, html {
	font-family: Monaco, Georgia, Times, serif;
	width: 100%;
	height: 100%;
}

#panelPrincipal {
	text-align: left;
}

#formConsultaCertificadoRetencion {
	width: 1000px;
	margin: 0 auto;
	color:
}

.datatable {
	padding-top: 10px;
}

.celda {
	width: 130px;
	color: #000;
}

.outputTitle {
	font-weight: bold;
	padding: 0px 10px !important;
}
</style>
</head>
<body>
	<rich:panel id="panelPrincipal" height="100%" reRender="lista">
		<f:facet name="header">
			<h:form id="formRefresh">
				<h:outputText value="Tesorería > Consulta de Certificados" />
				<a4j:commandLink action="#{conCertificadoRetencionController.inicio}" reRender="principal" style="text-decoration:none; margin-left:10px">
					<img src="#{facesContext.externalContext.requestContextPath}/imagenes/refresh.png" width="15" height="15" style="margin: 0; padding: 0" />
				</a4j:commandLink>
			</h:form>
		</f:facet>
		<center>
			<fieldset id="formConsultaCertificadoRetencion">
				<legend />
				<h:form>
					<div style="text-align: center;">
						<table style="margin: auto; width: 100%" border="0">
							<tr>
								<td colspan="8" style="text-align: left;"><h:outputText value="Compañia" styleClass="outputTitle" /></td>
							</tr>
							<tr>
								<td style="text-align: right; width: 12%;"><rich:message for="idUnidadNegocio" style="color: red;">
										<f:facet name="errorMarker">
											<h:graphicImage url="../imagenes/error.png" />
										</f:facet>
									</rich:message> <rich:spacer width="5" /> <h:outputText value="* Razón Social: " /></td>
								<td style="text-align: left; width: 17%;"><h:selectOneMenu id="idUnidadNegocio"
										value="#{conCertificadoRetencionController.idUnidadNegocio}" style=" width: 150px;" required="true" requiredMessage="">
										<f:selectItems value="#{conCertificadoRetencionController.comboListaUnidadNegocio}" />
									</h:selectOneMenu></td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
							</tr>
							<tr>
								<td colspan="8">
									<div style="width: 100%; border-top: 1px solid #C0C0C0; margin: 5px 0;"></div>
								</td>
							</tr>
							<tr>
								<td colspan="8" style="text-align: left;"><h:outputText value="Fecha de Emisión" styleClass="outputTitle" /></td>
							</tr>
							<tr>
								<td style="text-align: right; width: 12%;"><rich:message for="fecEmisionDesde" style="color: red;">
										<f:facet name="errorMarker">
											<h:graphicImage url="../imagenes/error.png" />
										</f:facet>
									</rich:message> <rich:spacer width="5" /> <h:outputText value="* Desde: " /></td>
								<td style="text-align: left; width: 17%;"><rich:calendar id="fecEmisionDesde" enableManualInput="false" showWeeksBar="false"
										datePattern="yyyy-MM-dd" value="#{conCertificadoRetencionController.fecEmisionDesde}" required="true" requiredMessage=""
										inputStyle="width: 125px;" /></td>
								<td style="text-align: right; width: 8%;"><rich:message for="fecEmisionHasta" style="color: red;">
										<f:facet name="errorMarker">
											<h:graphicImage url="../imagenes/error.png" />
										</f:facet>
									</rich:message> <rich:spacer width="5" /> <h:outputText value="* Hasta: " /></td>
								<td style="text-align: left; width: 17%;"><rich:calendar id="fecEmisionHasta" enableManualInput="false" showWeeksBar="false"
										datePattern="yyyy-MM-dd" value="#{conCertificadoRetencionController.fecEmisionHasta}" required="true" requiredMessage=""
										inputStyle="width: 125px;" /></td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
								<td>
									&nsp;
								</td>
							</tr>
							<tr>
								<td colspan="8">
									<div style="width: 100%; border-top: 1px solid #C0C0C0; margin: 5px 0;"></div>
								</td>
							</tr>
							<tr>
								<td colspan="8" style="text-align: left;"><h:outputText value="Nro. de Certificado" styleClass="outputTitle" /></td>
							</tr>
							<tr>
								<td style="text-align: right; width: 12%;"><h:outputText value="Desde: " /></td>
								<td style="text-align: left; width: 17%;"><h:inputText id="nroCertificadoDesde"
										value="#{conCertificadoRetencionController.nroCertificadoDesde}" style="width: 145px;" /></td>
								<td style="text-align: right; width: 8%;"><h:outputText value="Hasta: " /></td>
								<td style="text-align: left; width: 17%"><h:inputText id="nroCertificadoHasta"
										value="#{conCertificadoRetencionController.nroCertificadoHasta}" style="width: 145px;" /></td>
								<td style="text-align: right; width: 8%;"><h:outputText value="Estado" /></td>
								<td style="text-align: left; width: 18%"><h:selectOneMenu id="idEstadoCertificado"
										value="#{conCertificadoRetencionController.idEstadoCertificado}" style=" width: 150px;">
										<f:selectItems value="#{conCertificadoRetencionController.comboListaEstadoCert}" />
									</h:selectOneMenu></td>
								<td>
									&nsp;
								</td>
								<td style="text-align: left;"><a4j:commandButton id="buscarComprobantes" style="margin:0 5px;" value="Buscar"
										action="#{conCertificadoRetencionController.buscar}" reRender="lista,numRegEncontrados,exportar,verDetalleComprobante" /></td>
							</tr>
						</table>
					</div>
					<br />
					<rich:panel id="pnlLista">
						<div style="scrollbar-base-color: #3D8A3D; width: 1000px; border: 0px solid white; overflow-x: scroll;">
							<rich:extendedDataTable id="lista" var="itemComprobante" value="#{conCertificadoRetencionController.listaComprobanteElectronico}" width="998px"
								height="280px" selection="#{conCertificadoRetencionController.selection}" selectionMode="single" reRender="true" keppSaved="false">
								<a4j:support action="#{conCertificadoRetencionController.seleccionarCertificadoRetencion}" event="onselectionchange"
									reRender="verDetalleComprobante" />

								<rich:column id="colFechaEmision" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemComprobante.fechaEmision}"
									sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
									<f:facet name="header">
										<h:outputText value="Fec. Emisión" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.fechaEmision}">
											<f:convertDateTime pattern="yyyy-MM-dd" />
										</h:outputText>
									</center>
								</rich:column>
								<rich:column id="colTipoComprobante" headerClass="dataTableHeader" width="7%" sortable="true" sortBy="#{itemComprobante.tipoComprobante}"
									sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
									<f:facet name="header">
										<h:outputText value="Tipo Comp." />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.tipoComprobante}" />
									</center>
								</rich:column>
								<rich:column id="colProNroDocumento" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemComprobante.proNroDocumento}"
									sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
									<f:facet name="header">
										<h:outputText value="RUC" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.proNroDocumento}" />
									</center>
								</rich:column>
								<rich:column id="colProRazonSocial" headerClass="dataTableHeader" width="23%" sortable="true" sortBy="#{itemComprobante.proRazonSocial}"
									sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
									<f:facet name="header">
										<h:outputText value="Razón Social" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.proRazonSocial}" />
									</center>
								</rich:column>
								<rich:column id="colNroComprobanteElectronico" headerClass="dataTableHeader" width="9%" sortable="true"
									sortBy="#{itemComprobante.nroComprobanteElectronico}" sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
									<f:facet name="header">
										<h:outputText value="Nro. Certificado" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.nroComprobanteElectronico}" />
									</center>
								</rich:column>
								<rich:column id="colMonedaPago" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemComprobante.monedaPago}">
									<f:facet name="header">
										<h:outputText value="Moneda Pago" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.monedaPago}" />
									</center>
								</rich:column>
								<rich:column id="colImporteRetPer" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemComprobante.importeRetPer}">
									<f:facet name="header">
										<h:outputText value="Imp. Retenido" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.importeRetPer}" style="float:right">
											<f:convertNumber locale="en_US" minFractionDigits="2" />
										</h:outputText>
									</center>
								</rich:column>
								<rich:column id="colEstado" headerClass="dataTableHeader" width="11%" sortable="true" sortBy="#{itemComprobante.estado}">
									<f:facet name="header">
										<h:outputText value="Estado Certificado" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.estado}" />
									</center>
								</rich:column>
								<rich:column id="colCorreo" headerClass="dataTableHeader" width="11%" sortable="true" sortBy="#{itemComprobante.correo}">
									<f:facet name="header">
										<h:outputText value="Correo Electronico" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.correo}" />
									</center>
								</rich:column>
								<rich:column id="colDiario" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemComprobante.nroDiario}">
									<f:facet name="header">
										<h:outputText value="Diario SUN" />
									</f:facet>
									<center>
										<h:outputText value="#{itemComprobante.nroDiario}" />
									</center>
								</rich:column>
							</rich:extendedDataTable>
						</div>
						<br />
						<h:outputText id="numRegEncontrados" style="font-weight:bold;"
							value="N° de Registros Encontrados: #{null != conCertificadoRetencionController.listaComprobanteElectronico ? conCertificadoRetencionController.listaComprobanteElectronico.size() : 0}" />
					</rich:panel>

					<div align="right">
						<table border="0" cellpadding="0" cellspacing="0">
							<tr align="right">
								<td><a4j:commandButton id="verDetalleComprobante" action="#{conCertificadoRetencionController.verDetalleRespuestaPPL}"
										value="Ver Detalle" style="margin: 10px 5px;"
										oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelRespuestaPPLCertificado\')' : ';'}"
										disabled="#{conCertificadoRetencionController.disabledBtnVerDetalle}" render="true" reRender="panelRespuestaPPLCertificado" /> <h:commandButton
										id="exportar" action="#{conCertificadoRetencionController.exportar}" value="> Exportar"
										disabled="#{conCertificadoRetencionController.disabledBtnExportar}" style="margin: 10px 0px;" /></td>
							</tr>
						</table>
					</div>
				</h:form>
			</fieldset>
		</center>
	</rich:panel>
</body>

<rich:modalPanel id="panelRespuestaPPLCertificado" autosized="true">
	<f:facet name="controls">
		<h:panelGroup>
			<h:graphicImage id="hidelink" value="/imagenes/close.gif" styleClass="hidelink" />
			<rich:componentControl for="panelRespuestaPPLCertificado" attachTo="hidelink" operation="hide" event="onclick" />
		</h:panelGroup>
	</f:facet>
	<h:form>
		<a4j:region>
			<a4j:include viewId="/paginas/tesoreria/comprobantes/verRespuestaPPLCertificadoRetencion.xhtml" />
		</a4j:region>
	</h:form>
</rich:modalPanel>
</html>