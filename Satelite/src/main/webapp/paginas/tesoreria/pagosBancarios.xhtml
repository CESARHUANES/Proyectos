<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:watermark="http://richfaces.org/sandbox/watermark">
<a4j:keepAlive beanName="pagosBancariosController" />

<head>
<style type="text/css">
.celda {
	width: 150px;
	color: #000;
}

.datatable {
	padding-top: 10px;
}

body {
	font-family: Monaco, Georgia, Times, serif;
}
</style>

</head>
<body>

	<rich:panel id="reporte" height="100%" reRender="lista">
		<f:facet name="header">
			<h:outputText value="TesorerÃ­a > Pagos Bancarios Masivos">
			</h:outputText>
		</f:facet>
		<center>



			<h:form>
				<fieldset id="filtros" style="width: 1030px; display: block;">
					<legend>Filtros</legend>
					<table border="0" width="1030px">
						<tr>
							<td height="30" width="100" style="text-align: left;"><h:outputText value="Fecha Impresion Desde:" /></td>
							<td height="30" width="200" style="text-align: l;"><rich:calendar id="fechaPago1" enableManualInput="false" datePattern="dd/MM/yyyy"
									value="#{pagosBancariosController.fechaPago1}" showWeeksBar="false" /></td>
							<td height="30" width="80" style="text-align: left;"><h:outputText value="Tipo Pagos Masivo:" /></td>
							<td height="30" width="120" style="text-align: left;"><h:selectOneMenu id="banco" value="#{pagosBancariosController.tipoPago}"
									style=" width : 130px;" requiredMessage="Obligatorio">
									<f:selectItems value="#{pagosBancariosController.tiposPago}" />
								</h:selectOneMenu></td>



						</tr>
						<tr>
							<td><h:outputText value="Fecha Impresion Hasta:" /></td>
							<td height="30" width="200" style="text-align: left;"><rich:calendar id="fechaPago2" enableManualInput="false" datePattern="dd/MM/yyyy"
									value="#{pagosBancariosController.fechaPago2}" showWeeksBar="false" /></td>
							<td height="30" width="40" style="text-align: left;"><h:outputText value="Nro Lote:" /></td>
							<td height="30" width="120" style="text-align: left;"><h:inputText value="#{pagosBancariosController.nroLote}" /></td>

							<td width="30" align="center" valign="middle" height="30" style="text-align: right;"><a4j:commandButton
									action="#{pagosBancariosController.buscar}" value="Buscar" reRender="lista,exportar,verDetalles" style="margin:0 10px;" /></td>
							<!--<td width="30" align="center" valign="middle" height="30" style="text-align: left;">
							 <h:commandButton id="limpiar"
								action="#{pagosBancariosController.limpiar}" 
								immediate="true" 
								reRender="txtMoneda,fechaPago"
								style="float:right;"
								value="Limpiar" />
						</td> -->
						</tr>

					</table>
				</fieldset>


			</h:form>


			<h:form id="form2">

				<fieldset id="filtros" style="width: 1030px; display: block;">
					<legend>Parametros</legend>
					<div align="left">
						<h:panelGrid columns="2">

							<h:outputText value="Fecha del proceso" />
							<rich:calendar id="fecProceso" enableManualInput="false" datePattern="dd/MM/yyyy" value="#{pagosBancariosController.fecProceso}"
								showWeeksBar="false" />
						</h:panelGrid>
					</div>


				</fieldset>

				<div style="scrollbar-base-color: #3d8a3d; width: 650px; border: 0px solid white; overflow-x: scroll; height: 300px; margin-top: 20px">
					<rich:extendedDataTable id="lista" var="lote" value="#{pagosBancariosController.listaTabla}" height="270px" width="600px" rows="10"
						selectionMode="single" reRender="true" selection="#{pagosBancariosController.selection}">




						<a4j:support event="onselectionchange" action="#{pagosBancariosController.seleccionarLoteActivo}" ajaxSingle="true" limitToList="true"
							reRender="panelDetalle" />


						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Nro Lote" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.nro_lote}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Tipo Pago Masivo" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.tipo_pago} MASIVO" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Banco" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.banco}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Moneda" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.moneda}" />
							</center>
						</rich:column>


						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Fecha Creacion" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.fec_creacion}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Seleccionada" />
							</f:facet>
							<center>

								<h:selectBooleanCheckbox value="#{lote.seleccionado}" />
							</center>
						</rich:column>





						<f:facet name="footer">
							<rich:datascroller id="ds" for="lista" maxPages="10"></rich:datascroller>
						</f:facet>


					</rich:extendedDataTable>
				</div>


				<div style="width: 800px; border: 0px solid white;">




					<br></br>
					<h:panelGrid columns="2">

						<a4j:commandButton id="verDetalles" value="Ver Detalles" action="#{pagosBancariosController.verDetalles}"
							disabled="#{pagosBancariosController.desabilitarVerDetalles}"
							oncomplete="if (#{pagosBancariosController.mostrarDetalles}) #{rich:component('panelDetalle')}.show();" reRender="panelDetalle" />

						<a4j:commandButton id="exportar" value="Exportar Trama" action="#{pagosBancariosController.exportarTrama}"
							disabled="#{pagosBancariosController.desabilitarExport}" />
					</h:panelGrid>



				</div>

			</h:form>




		</center>
	</rich:panel>



	<rich:modalPanel id="panelDetalle" autosized="true">
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/imagenes/close.gif" styleClass="hidelink" id="hidelink2" />
				<rich:componentControl for="panelDetalle" attachTo="hidelink2" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>
		<h:form>
			<a4j:region>
				<h2>Detalles del Lote</h2>
				<br />
				<br />
				<a4j:outputPanel id="detalleLote">

					<rich:extendedDataTable id="lista" var="lote" value="#{pagosBancariosController.listaJoinProveedorFactura}" height="270px" width="1050px">
						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Nro Lote" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.nroLote}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Tipo Doc Proveedor" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.tipoDocProveedor}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Numero Doc Proveedor" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.numeroDocProveedor}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="300">
							<f:facet name="header">
								<h:outputText value="Nombre Proveedor" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.nombreProveedor}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Importe" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.importe}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Tipo Cod Sunat" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.tipoCodSunat}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="150">
							<f:facet name="header">
								<h:outputText value="Cuenta Contable" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.cuentaContable}" />
							</center>
						</rich:column>

						<rich:column headerClass="dataTableHeader" width="100">
							<f:facet name="header">
								<h:outputText value="Referencia" />
							</f:facet>
							<center>
								<h:outputText value="#{lote.referencia}" />
							</center>
						</rich:column>



					</rich:extendedDataTable>

				</a4j:outputPanel>


				<div align="right">
					<a4j:commandButton id="btnCerrar" value="Cerrar" oncomplete="#{rich:component('panelDetalle')}.hide()" />
				</div>

			</a4j:region>
		</h:form>
	</rich:modalPanel>


</body>
</html>