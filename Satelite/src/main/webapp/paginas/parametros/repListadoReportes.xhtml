<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets" 
	  xmlns:a4j="http://richfaces.org/a4j" 
	  xmlns:rich="http://richfaces.org/rich">
		
<a4j:keepAlive beanName="reporteSBSModeloUnoDetalleController"   />
<head>

</head>
<body>
  <h:form>
   <rich:panel id="envio" height="100%">
	   
	   	<f:facet name="header">
				<h:outputText value="Reporte SBS > Listado de Reportes" />
		</f:facet>
	   
	   <table align="center">
	    <tr>
	         <td align="right"><h:outputText value="Codigo" /></td>
	         <td style="width: 25%; text-align: left;"><h:inputText id="codigoReporte" value="#{reporteSBSModeloUnoDetalleController.codigoReporte}" maxlength="20" /></td>
	         
	         <td align="right"><h:outputText value="Tipo Reporte" /></td>
	         <td width="20%" align="left"><h:selectOneMenu id="tipoReporte" value="#{reporteSBSModeloUnoDetalleController.tipoReporteParametro2}">
				<f:selectItems value="#{reporteSBSModeloUnoDetalleController.tipoReporteparametrosItems}" />

			    </h:selectOneMenu>
			 </td>	 
	         
	         <td align="right"><h:outputText value="Periodo" /></td>
	         <td width="10%" align="left">
	            <h:selectOneMenu id="anioReporte" value="#{reporteSBSModeloUnoDetalleController.periodoAnio2}">
				<f:selectItems value="#{reporteSBSModeloUnoDetalleController.anioReporteparametrosItems}" />
			    </h:selectOneMenu>
			  </td> 			  
			  <td  align="left">
			 	<h:selectOneMenu id="peridoReporte" value="#{reporteSBSModeloUnoDetalleController.periodoTrimestre2}">
				<f:selectItems value="#{reporteSBSModeloUnoDetalleController.periodoReporteparametrosItems}" />
			    </h:selectOneMenu>			 
			  </td>
			 
	    </tr>
	    <tr>
	         <td align="right"><h:outputText value="Usuario" /></td>
	         <td style="width: 25%; text-align: left;"><h:inputText id="UsuarioReporte" value="#{reporteSBSModeloUnoDetalleController.usuarioReporte}" maxlength="20" /></td>
	         
	         <td align="right"><h:outputText value="Resultado" /></td>
	          <td width="20%" align="left"><h:selectOneMenu id="estadoReporte" value="#{reporteSBSModeloUnoDetalleController.estadoReporte}">
				<f:selectItems value="#{reporteSBSModeloUnoDetalleController.estadoReporteparametrosItems}" />

			    </h:selectOneMenu>
			 </td>
	         	         
	    </tr>
	    <tr>	
	    	<td colspan="2" height="10px"></td>
	    </tr> 	    	      
	   </table>
	   
	   <table align="center">	   	
	    <tr> 	   
	    	 <td align="center">
	         	<h:commandButton id="button" action="#{reporteSBSModeloUnoDetalleController.buscarReportes}" reRender="tblReporte" value="Buscar" style="width:125px" />			
	         </td>	   
	    </tr>
	    <tr>
	     <td>
	    	<rich:extendedDataTable id="tblReporte" var="reporte" value="#{reporteSBSModeloUnoDetalleController.listaReportesGeneradosBean}" width="1100px" height="260px" rows="200"
						selectedClass="dataTableSelectedRow" 
						selection="#{reporteSBSModeloUnoDetalleController.selection}"
						sortMode="single" selectionMode="single" reRender="true">

						<rich:column id="colCodigoProceso" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{reporte.codigoProceso}">
							<f:facet name="header">
								<h:outputText value="Código Proceso" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.codigoProceso}" />
							</center>
						</rich:column>
						<rich:column id="colTipoReporte" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{reporte.tipoReporte}">
							<f:facet name="header">
								<h:outputText value="Tipo Reporte" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.tipoReporte}" />
							</center>
						</rich:column>
						
						<rich:column id="colAnio" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{reporte.periodo}">
							<f:facet name="header">
								<h:outputText value="Trimestre" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.periodo}" />
							</center>
						</rich:column>
						
						<rich:column id="colBeneficiario" headerClass="dataTableHeader" width="5%" sortable="true" sortBy="#{reporte.anio}">
							<f:facet name="header">
								<h:outputText value="Año" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.anio}" />
							</center>
						</rich:column>
						<!--
					    <rich:column id="colTipoCambio" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{reporte.tipoCambio}">
							<f:facet name="header">
								<h:outputText value="Tipo de Cambio" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.tipoCambio}" />
							</center>
						</rich:column>						
						-->
						<rich:column id="colFechaGeneracion" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{reporte.fechaRegistro}">
							<f:facet name="header">
								<h:outputText value="Fecha Generación" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.fechaRegistro}" >
								<f:convertDateTime pattern="yyyy-MM-dd " />
								</h:outputText>
							</center>
						</rich:column>	
						
						<rich:column id="colUsuario" headerClass="dataTableHeader" width="7%" sortable="true" sortBy="#{reporte.usuarioProceso}">
							<f:facet name="header">
								<h:outputText value="Usuario" />
							</f:facet>
							<center> 
								<h:outputText value="#{reporte.usuarioProceso}" />
							</center>
						</rich:column>	
						
						<rich:column id="colResultado" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{reporte.resultado}">
							<f:facet name="header">
								<h:outputText value="Estado" />
							</f:facet>
							<center>
								<h:outputText value="#{reporte.resultado eq '1501' ?'PROCESADO OK':
													   reporte.resultado eq '1503' ?'NO PROCESADO':
								 					   reporte.resultado eq '1502'?'PROCESADO ERROR':'-'}" />															
							</center>
						</rich:column>
						
						<rich:column headerClass="dataTableHeader" width="10%">
					 		<f:facet name="header">
					 		<h:outputText value="Reprocesar" />
					 		</f:facet>
					  		<!-- <a4j:region ajaxSingle="true">  -->
						 		<div align="center" >
			                	<h:commandButton  styleClass="no-decor"  				                  	
				                 	image="#{ '1' == '1'?'/imagenes/procesar.png':'/imagenes/blanco.png'}"
				                 	actionListener="#{reporteSBSModeloUnoDetalleController.actionPasarDatos}"
				                 	action="#{reporteSBSModeloUnoDetalleController.reprocesar}"  >			                   
				                    <f:attribute  name="codigoReporteDescar"  value="#{reporte.codigoProceso}"/>
				                    <f:attribute  name="codigoMetodo"  value="reprocesar"/>				                  	               				               		
			                	</h:commandButton>
			               		</div>
		               			<!-- </a4j:region> -->
		            	</rich:column> 
						
						<rich:column headerClass="dataTableHeader" width="10%">
					 		<f:facet name="header">
					 		<h:outputText value="Descarga Archivo" />
					 		</f:facet>
					  		 <a4j:region ajaxSingle="true"> 
						 		<div align="center" >
			                	<h:commandButton  styleClass="no-decor"  
			                	 style="visibility: #{reporte.resultado!='1503'? 'show': 'hidden'};"				                  	
				                 	image="/imagenes/descargar.png"				                  					                 
				                 	actionListener="#{reporteSBSModeloUnoDetalleController.actionPasarDatos}"  >			                   
				                    <f:attribute  name="codigoReporteDescar"  value="#{reporte.codigoProceso}"/>
				                    <f:attribute  name="codigoMetodo"  value="buscarArchivo"/>				                  	               				               		
			                	</h:commandButton>
			               		</div>
		               			 </a4j:region> 
		            	</rich:column> 
																		
						<rich:column headerClass="dataTableHeader" width="10%">
					 		<f:facet name="header">
					 		<h:outputText value="Descargar log" />
					 		</f:facet>
					  		<a4j:region ajaxSingle="true">  
						 		<div align="center" >
			                	<h:commandButton  styleClass="no-decor"  
			                	   style="visibility: #{reporte.resultado=='1502'? 'show': 'hidden'};"				                  	
				                 	image="/imagenes/descargar.png"
				                 	actionListener="#{reporteSBSModeloUnoDetalleController.actionPasarDatos}"  >			                   
				                    <f:attribute  name="codigoReporteDescar"  value="#{reporte.codigoProceso}"/>
				                    <f:attribute  name="codigoMetodo"  value="descargarLog"/>				                  	               				               		
			                	</h:commandButton>
			               		</div>
		               		 </a4j:region> 
		            	</rich:column>
		            			            		                        		            			            				            			            											
						<f:facet name="footer">
							<rich:datascroller id="ds" for="tblReporte" maxPages="10"></rich:datascroller>
						</f:facet>
								
		 	  </rich:extendedDataTable>
		    </td>
		 </tr>  
		</table>
   </rich:panel>
  </h:form>	
</body>
</html>