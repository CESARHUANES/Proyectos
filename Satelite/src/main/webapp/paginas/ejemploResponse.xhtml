<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
	xmlns:jsp="http://java.sun.com/jsp/jstl/core">
<a4j:keepAlive beanName="ejemploController" />
<head>
</head>

<body>
	<h:form>
		<h1>OK Request, your response:</h1>
		<h:outputText value="Su User: " />
		<h:outputText value="#{ejemploController.user}" />

		<br></br>
		<br></br>

		<h:outputText value="Su verdaero Pass: " />
		<h:outputText value="#{ejemploController.pass}" />
	</h:form>

	<br></br>
	<br></br>
	<h1>Todos:</h1>

	<h:form>
		Ingrese un usuario: <h:inputText value="#{ejemploController.userPK}" />

		<br></br>

		<a4j:commandButton value="Consultar" action="#{ejemploController.mostrarPorUser}" reRender="tableX">
		</a4j:commandButton>

		<br></br>

		<rich:extendedDataTable id="tableX" value="#{ejemploController.ejemploList}" var="list" selectionMode="single"
			selection="#{ejemploController.selection}" reRender="true">


			<a4j:support event="onselectionchange" action="#{ejemploController.onSelectionChanged}" ajaxSingle="true" limitToList="true" reRender="panelEditar" />
			<rich:column>
				<f:facet name="header">User</f:facet>
    				#{list.user}
    		</rich:column>

			<rich:column>
				<f:facet name="header">Pass</f:facet>
    				#{list.pass}
    		</rich:column>

			<rich:column>
				<f:facet name="header">Selected</f:facet>
				<h:selectBooleanCheckbox value="#{list.selected}" />
			</rich:column>
		</rich:extendedDataTable>

		<br></br>
		<a4j:commandButton value="Registrar" action="#{ejemploController.limpiar}">
			<rich:componentControl for="panelInsertar" operation="show" event="onclick" />
		</a4j:commandButton>

		<a4j:commandButton value="Editar" action="#{ejemploController.setActual}">
			<rich:componentControl for="panelEditar" operation="show" event="onclick" />
		</a4j:commandButton>

		<a4j:commandButton value="Eliminar" action="#{ejemploController.setActual}">
			<rich:componentControl for="panelEliminar" operation="show" event="onclick" />
		</a4j:commandButton>
		<h:commandButton value="Imprimir" action="#{ejemploController.imprimir}" />

		<a4j:commandButton value="PDF">
			<rich:componentControl for="panelPDF" operation="show" event="onclick" />
		</a4j:commandButton>


		<h:panelGrid columns="2" columnClasses="top,top">
			<rich:fileUpload fileUploadListener="#{ejemploController.listener}" maxFilesQuantity="#{ejemploController.uploadsAvailable}" id="upload"
				immediateUpload="#{ejemploController.autoUpload}" acceptedTypes="jpg, gif, png, bmp" allowFlash="#{ejemploController.useFlash}">
				<a4j:support event="onuploadcomplete" reRender="info" />
			</rich:fileUpload>
			<h:panelGroup id="info">
				<rich:panel bodyClass="info">
					<f:facet name="header">
						<h:outputText value="Uploaded Files Info" />
					</f:facet>
					<h:outputText value="No files currently uploaded" rendered="#{ejemploController.size==0}" />
					<rich:dataGrid columns="1" value="#{ejemploController.files}" var="file" rowKeyVar="row">
						<rich:panel bodyClass="rich-laguna-panel-no-header">
							<h:panelGrid columns="2">
								<a4j:mediaOutput element="img" mimeType="#{file.mime}" createContent="#{ejemploController.paint}" value="#{row}"
									style="width:100px; height:100px;" cacheable="false">
									<f:param value="#{ejemploController.timeStamp}" name="time" />
								</a4j:mediaOutput>
								<h:panelGrid columns="2">
									<h:outputText value="File Name:" />
									<h:outputText value="#{file.name}" />
									<h:outputText value="File Length(bytes):" />
									<h:outputText value="#{file.length}" />
								</h:panelGrid>
							</h:panelGrid>
						</rich:panel>
					</rich:dataGrid>
				</rich:panel>
				<rich:spacer height="3" />
				<br />
				<a4j:commandButton action="#{ejemploController.clearUploadData}" reRender="info, upload" value="Clear Uploaded Data"
					rendered="#{ejemploController.size>0}" />
			</h:panelGroup>
		</h:panelGrid>

		<br></br>
		<a4j:commandButton action="#{ejemploController.imprimirUpload}" value="UploadX" />



	</h:form>

	<!-- INICIO POPUP INSERT -->
	<rich:modalPanel id="panelInsertar" width="250" height="300">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Modal Panel"></h:outputText>
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/images/modal/close.png" styleClass="hidelink" id="hidelink" />
				<rich:componentControl for="panelInsertar" attachTo="hidelink" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>
		<h:outputText value="This panel is called using Component Control Component"></h:outputText>
		<br />
		<h:outputText value="Closure link (X) works also through Component Control"></h:outputText>

		<h:form>
        	Selected User: <h:inputText value="#{ejemploController.ejemploAux.user}" />
			<br></br>
        	Selected Pass: <h:inputText value="#{ejemploController.ejemploAux.pass}" />
			<br></br>
			<br></br>
			<a4j:commandButton value="Guardar" action="#{ejemploController.insertar}" reRender="tableX,panelInsertar">
				<rich:componentControl for="panelInsertar" operation="hide" event="onclick" />
			</a4j:commandButton>
		</h:form>
	</rich:modalPanel>
	<!-- FIN POPUP INSERT -->

	<!-- INICIO POPUP UPDATE -->
	<rich:modalPanel id="panelEditar" width="250" height="300">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Modal Panel"></h:outputText>
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/images/modal/close.png" styleClass="hidelink2" id="hidelink2" />
				<rich:componentControl for="panelEditar" attachTo="hidelink2" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>
		<h:outputText value="This panel is called using Component Control Component"></h:outputText>
		<br />
		<h:outputText value="Closure link (X) works also through Component Control"></h:outputText>

		<h:form>
        	Selected User: <h:inputText value="#{ejemploController.ejemploActual.user}" />
			<br></br>
        	Selected Pass: <h:inputText value="#{ejemploController.ejemploActual.pass}" />
			<br></br>
			<br></br>
			<a4j:commandButton value="Guardar" action="#{ejemploController.actualizar}" reRender="tableX">
				<rich:componentControl for="panelEditar" operation="hide" event="onclick" />
			</a4j:commandButton>
		</h:form>
	</rich:modalPanel>
	<!-- FIN POPUP UPDATE -->


	<!-- INICIO POPUP DELETE -->
	<rich:modalPanel id="panelEliminar" width="250" height="300">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Modal Panel"></h:outputText>
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/images/modal/close.png" styleClass="hidelink3" id="hidelink3" />
				<rich:componentControl for="panelEliminar" attachTo="hidelink3" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>

		<h:form>
        	Selected User: <h:outputText value="#{ejemploController.ejemploActual.user}" />
			<br></br>
        	Selected Pass: <h:outputText value="#{ejemploController.ejemploActual.pass}" />

			<br></br>
			<br></br>

			<h:outputText value="¿Seguro de que desea Eliminar este registro?"></h:outputText>

			<br></br>

			<a4j:commandButton value="Eliminar" action="#{ejemploController.eliminar}" reRender="tableX">
				<rich:componentControl for="panelEliminar" operation="hide" event="onclick" />
			</a4j:commandButton>

			<a4j:commandButton value="Cancelar">
				<rich:componentControl for="panelEliminar" operation="hide" event="onclick" />
			</a4j:commandButton>
		</h:form>
	</rich:modalPanel>
	<!-- FIN POPUP DELETE -->


	<!-- INICIO POPUP PDF -->
	<rich:modalPanel id="panelPDF" width="250" height="300">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Modal Panel"></h:outputText>
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/images/modal/close.png" styleClass="hidelink4" id="hidelink4" />
				<rich:componentControl for="panelPDF" attachTo="hidelink4" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>

		<br></br>
		<br></br>
		<!--http://www.javahispano.org/storage/contenidos/JavaEE.pdf  -->
		<a href="http://www.javahispano.org/storage/contenidos/JavaEE.pdf" target="_blank">PDF</a>

		<object width="900" height="800" type="application/pdf" data="#{ejemploController.rutaPDF}">
			<param name="src" value="#{ejemploController.rutaPDF}" />
			<p>N o PDF available</p>
		</object>


	</rich:modalPanel>
	<!-- FIN POPUP PDF -->
</body>

<ui:define name="pageFooter">
	<table width="100%">
		<tr>
			<td align="center"><h:outputText
					value="Cardif del Perú - Av. Canaval y Moreyra 380, Piso 1101, San Isidro, Lima, Perú. - Fono: 615 1700 / Fax: 615 1721 "
					style="font-family:Verdana; font-size:11px; color: GREY;"></h:outputText> <a4j:include viewId="/paginas/error.xhtml" /></td>
		</tr>
	</table>
</ui:define>

</html>