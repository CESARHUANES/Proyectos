<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="repConsultaSOATController" />

	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
		
		<style type="text/css">
			.celda {
				width: 130px;
				color: #000;
			}
				
			.datatable {
				padding-top: 10px;
			}
			
			body, html {
				font-family: Monaco, Georgia, Times, serif;
				width: 100%;
				height: 100%;
			}
			
			.separador {
				padding: 0;
				margin: 0 2px;
				float: center;
			}
			
			#consultar {
				text-align: left;
			}
			
			#formRepConsulatSOAT {
				width: 1000px;
				margin: 0 auto;
				color:
			}
			
			.rich-message{
				color: red;
				display: block;
				float: left;
			}
		</style>	
	</head>
	<body>
		
	
				
					<h:form id="formRepConsulatSOAT">
						<div style="text-align: center;">
							<table style="margin: auto;" border="0">
								<tr>
									<td style="text-align: right; width: 14%">
										<rich:message for="codSocio" style="color: red;"	>
											<f:facet name="errorMarker">
												<h:graphicImage url="../imagenes/error.png" />
											</f:facet>
										</rich:message>
										<rich:spacer width="1" />
										<h:outputText value="* Socio:" />
									</td>
									<td style="text-align: left; width: 15%">
										<h:selectOneMenu id="codSocio" value="#{repConsultaSOATController.codSocio}" style=" width: 150px;" 
										                 valueChangeListener="#{repConsultaSOATController.buscarCanalesPorSocio}"
										                 required="true" requiredMessage="Obligatorio">
											<f:selectItems value="#{repConsultaSOATController.comboListaSocios}" />
											<a4j:support event="onchange" reRender="codCanal" />
										</h:selectOneMenu>
									</td>
									
									<td style="text-align: right; width: 11%;">
										<h:outputText value="Canal: " />
									</td>
									
									<td style="text-align: left; width: 14%;">
										<h:selectOneMenu id="codCanal" value="#{repConsultaSOATController.codCanal}" style="width: 150px;">
											<f:selectItems value="#{repConsultaSOATController.comboListaCanales}" />
										</h:selectOneMenu>
									</td>
									
									<td style="text-align: right; width: 11%">
										<h:outputText value="Nro. Placa:" />
									</td>
									<td style="text-align: right; width: 9%">
										<h:inputText id="numPlaca" value="#{repConsultaSOATController.numPlaca}" maxlength="7" 
											style=" width: 145px;float: left;" onkeyup="value=value.toUpperCase();" />
									</td>
									<td style="text-align: right; width: 11%">
										<h:outputText value="Nro. Certificado: " />
									</td>
									<td style="text-align: right;">
										<h:inputText id="numCertificado" value="#{repConsultaSOATController.numCertificado}" maxlength="14" 
											style=" width: 145px;float: left;" onkeypress="return valNumeros(event);" />
									</td>
								</tr>
								<tr>
									<td style="text-align: right; width: 11%;">
										<h:outputText value="Nro. Documento: " />
									</td>
									<td style="text-align: left;">
										<h:inputText id="numDocumentoID" value="#{repConsultaSOATController.numDocumentoID}" maxlength="11" 
											style=" width: 145px;float: left;" onkeypress="return valNumeros(event);" />
									</td>
									<td style="text-align: right; width: 11%;">
										<h:outputText value="Contratante: " />
									</td>
									<td style="text-align: left; width: 63%;" colspan="3">
										<h:inputText id="nombreContratante" value="#{repConsultaSOATController.nombreContratante}" maxlength="50" 
											        style=" width: 254px;float: left;" onkeyup="value=value.toUpperCase();" />
									</td>
								</tr> 
								<tr>
									<td colspan="6">
										<div style="width: 100%; border-top: 1px solid #C0C0C0; margin: 5px 0;"></div>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Fecha de Venta: " style="text-align: left;font-weight:bold"/>
									</td>
									<td>&nbsp;</td>
									<td>&nbsp;</td>
									<td>&nbsp;</td>
									<td>&nbsp;</td>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td style="text-align: right; width: 10%;">
										<h:outputText value="Desde: " />
									</td>
									<td style="text-align: left;">
										<rich:calendar id="fecVentaDesde" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd"
											value="#{repConsultaSOATController.fechaVentaDesde}" required="false" requiredMessage="" inputStyle="width: 125px;" />
									</td>
									<td style="text-align: right; width: 10%;">
										<h:outputText value="Hasta: " />
									</td>
									<td style="text-align: left;">
										<rich:calendar id="fecVentaHasta" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd"
											value="#{repConsultaSOATController.fechaVentaHasta}" required="false" requiredMessage="" inputStyle="width: 125px;" />
									</td>
									<td>&nbsp;</td>
									<td style="text-align: left;">
										<a4j:commandButton action="#{repConsultaSOATController.procesarBusqueda}" value="Buscar" reRender="lista, exportar" />
									</td>
								</tr>
								<tr>
									<td colspan="10" height="5px"></td>
								</tr>
							</table>
						</div>
					</h:form>
					<rich:panel id="consultar" height="100%" reRender="lista">
					<h:form id="form2">
						<div class="datatable">
							<div style="scrollbar-base-color: #3d8a3d; width: 1000px; border: 0px solid white; overflow-x: scroll;">
								<rich:extendedDataTable id="lista" var="itemPoliza" value="#{repConsultaSOATController.listaPolizasSOAT}" width="2000px" rows="50"
									height="350px" selectionMode="single" reRender="true">
									<rich:column id="nroPolizaPe" headerClass="dataTableHeader" width="8.5%" sortable="true" sortBy="#{itemPoliza.nroPolizaPe}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Nª Póliza" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.nroPolizaPe}" />
										</center>
									</rich:column>
									<rich:column id="placa" headerClass="dataTableHeader" width="7%" sortable="true" sortBy="#{itemPoliza.placa}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Placa" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.placa}" />
										</center>
									</rich:column>
									<rich:column id="marca" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPoliza.marca}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Marca"/>
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.marca}" />
										</center>
									</rich:column>
									<rich:column id="modeloImpres" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{itemPoliza.modelo}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Modelo" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.modelo}" />
										</center>
									</rich:column>
									<rich:column id="tipVehi" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{itemPoliza.tipVehi}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Tipo" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.tipVehi}" />
										</center>
									</rich:column>
									<rich:column id="importeCobroDsc" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPoliza.importeCobroDsc}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Importe" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.importeCobroDsc}" />
										</center>
									</rich:column>
									<rich:column id="nroDocumento" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPoliza.numDoc}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="N° Documento" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.numDoc}" />
										</center>
									</rich:column>
									<rich:column id="contratante" headerClass="dataTableHeader" width="12%" sortable="true" sortBy="#{itemPoliza.contratante}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Contratante" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.contratante}" />
										</center>
									</rich:column>
									<rich:column id="nCertificado" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPoliza.numCertificado}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="Certificado" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.numCertificado}" />
										</center>
									</rich:column>
									
									
									<rich:column id="fecVenta" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPoliza.fecVenta}"
										sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
										<f:facet name="header">
											<h:outputText value="F. Venta" />
										</f:facet>
										<center>
											<h:outputText value="#{itemPoliza.fecVenta}">
												<f:convertDateTime pattern="yyyy-MM-dd"/>
											</h:outputText>
										</center>
									</rich:column>
									
									<rich:column id="estado" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPoliza.estado}"
												sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
												<f:facet name="header">
													<h:outputText value="Estado" />
												</f:facet>
												<center>
													<h:outputText value="#{itemPoliza.estado}" />
												</center>
									</rich:column>
								
								   <rich:column headerClass="dataTableHeader" width="7.5%" sortable="true" sortIconAscending="dataTableAscIcon" 
								sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Ver Detalle" />
								</f:facet>
								<center>
<!-- 									<a4j:commandLink action="#{postVentaSOATController.cargarPagVerDetalle(itemPostVentaSOAT.id)}"   -->
<!-- 										reRender="tituloCabecera, panelStep1, panelStep2" render="true"> -->
<!-- 										<h:graphicImage url="/imagenes/Zoom-icon.png" /> -->
<!-- 									</a4j:commandLink> -->
									
 							<h:commandLink action="#{repConsultaSOATController.cargarPagVerDetalle}">
										<f:param value="#{itemPoliza.pk}" name="ventaID" />										
										<h:graphicImage url="/imagenes/Zoom-icon.png" />
									</h:commandLink>
<!-- 									rendered="true"> -->
									
								</center>
								</rich:column>
								
							
									<f:facet name="footer">
										<rich:datascroller id="ds" for="lista" maxPages="10"></rich:datascroller>
									</f:facet>
								</rich:extendedDataTable>
							</div>
						</div>
						<a4j:region>
							<div style="width: 800px; border: 0px solid white;">
								<br></br>
								<h:commandButton id="exportar" style="margin:0 5px;" action="#{repConsultaSOATController.exportar}" value="> Exportar" 
									disabled="#{repConsultaSOATController.desabilitarExport}"/>
							</div>
						</a4j:region>
					</h:form>
			
		</rich:panel>
	</body>
</html>