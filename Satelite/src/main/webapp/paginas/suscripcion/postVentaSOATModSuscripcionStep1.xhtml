<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="postVentaSOATController" />
	
	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
		<style type="text/css">
			
		</style>
	</head>
	<body>
		<h:form id="formPostVentaSOATStep1_A">
			<div style="text-align: center;">
				<table style="margin: auto; width: 98%" border="0">
					<tr>
						<a4j:region id="regionSocioCanal">
							<td style="text-align: right; width: 11%;">
								<h:outputText value="Socio: " />
							</td>
							<td style="text-align: left; width: 14%;">
								<h:selectOneMenu id="idSocioProducto" value="#{postVentaSOATController.idSocio}" style="width: 150px;" valueChangeListener="#{postVentaSOATController.buscarCanalesPorSocio}">
									<f:selectItems value="#{postVentaSOATController.comboListaSocios}" />
									<a4j:support event="onchange" reRender="idCanal" />
								</h:selectOneMenu>
							</td>
							<td style="text-align: right; width: 11%;">
								<h:outputText value="Canal: " />
							</td>
							<td style="text-align: left; width: 14%;">
								<h:selectOneMenu id="idCanal" value="#{postVentaSOATController.idCanal}" style="width: 150px;">
									<f:selectItems value="#{postVentaSOATController.comboListaCanales}" />
								</h:selectOneMenu>
							</td>
						</a4j:region>
						<td style="text-align: right; width: 11%;">
							<h:outputText value="Nro. Placa: " />
						</td>
						<td style="text-align: left; width: 14%;">
							<h:inputText id="numPlaca" value="#{postVentaSOATController.numPlaca}" maxlength="7" style="width: 145px; float: left;" 
								 onkeyup="value=value.toUpperCase();" />
						</td>
						<td style="text-align: right; width: 11%;">
							<h:outputText value="Nro. Certificado: " />
						</td>
						<td style="text-align: left; width: 14%;">
							<h:inputText id="numCertificado" value="#{postVentaSOATController.numCertificado}" maxlength="14" style=" width: 145px;float: left;" 
								onkeypress="return valNumeros(event);" />
						</td>
					</tr>
					<tr>
						<td style="text-align: right; width: 11%;">
							<h:outputText value="Nro. Documento: " />
						</td>
						<td style="text-align: left; width: 14%;">
							<h:inputText id="numDocumentoID" value="#{postVentaSOATController.numDocumentoID}" maxlength="11" 
								style="width: 145px; float: left;" onkeypress="return valNumeros(event);" />
						</td>
						<td style="text-align: right; width: 11%;">
							<h:outputText value="Contratante: " />
						</td>
						<td style="text-align: left; width: 39%;" colspan="3">
							<h:inputText id="nombreContratante" value="#{postVentaSOATController.nombreContratante}" maxlength="50" 
								style="width: 415px; float: left;"  onkeyup="value=value.toUpperCase();" />
						</td>
						<td>&nsp;</td>
						<td>&nsp;</td>
					</tr>
					<tr>
						<td colspan="8">
							<div class="separatorLine" />
						</td>
					</tr>
					<tr>
						<td style="text-align: right; font-weight: bold;">
							<h:outputText value="Fecha de Venta" />
						</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td style="text-align: right; width: 11%;">
							<h:outputText value="Desde: " />
						</td>
						<td style="text-align: left; width: 14%;">
							<rich:calendar id="fecVentaDesde" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" 
								value="#{postVentaSOATController.fecVentaDesde}" inputStyle="width: 125px;" />
						</td>
						<td style="text-align: right; width: 11%;">
							<h:outputText value="Hasta: " />
						</td>
						<td style="text-align: left; width: 14%;">
							<rich:calendar id="fecVentaHasta" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd"
								value="#{postVentaSOATController.fecVentaHasta}" inputStyle="width: 125px;" />
						</td>
						<td>&nbsp;</td>
						<td style="text-align: left; width: 14%">
							<a4j:commandButton action="#{postVentaSOATController.procesarBusqueda}" value="Buscar" reRender="lista, exportar, numRegEncontrados" />
						</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
				</table>
			</div>
		</h:form>
		
		<h:form id="formPostVentaSOATStep1_B">
			<div class="datatable">
				<rich:panel id="panLista">
					<div class="extendedDTableContenido">
						<rich:extendedDataTable id="lista" var="itemPostVentaSOAT" value="#{postVentaSOATController.listaPostVentaSOAT}" width="1400px" height="350px"
							selectionMode="single" rows="12" keppSaved="false">
							<rich:column headerClass="dataTableHeader" width="15%" sortable="true" sortBy="#{itemPostVentaSOAT.socioProducto}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Socio" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.socioProducto}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="7.5%" sortable="true" sortBy="#{itemPostVentaSOAT.canal}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Canal" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.canal}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="7.5%" sortable="true" sortBy="#{itemPostVentaSOAT.nroPoliza}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="N° Póliza" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.nroPoliza}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="9%" sortable="true" sortBy="#{itemPostVentaSOAT.fecVenta}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Fecha Venta" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.fecVenta}">
										<f:convertDateTime pattern="yyyy-MM-dd"/>
									</h:outputText>
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="9.5%" sortable="true" sortBy="#{itemPostVentaSOAT.nroCertificado}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="N° Certificado" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.nroCertificado}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="7%" sortable="true" sortBy="#{itemPostVentaSOAT.placa}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="N° Placa" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.placa}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="20%" sortable="true" sortBy="#{itemPostVentaSOAT.contratante}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Apellidos y Nombres del Contratante" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.contratante}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="9.5%" sortable="true" sortBy="#{itemPostVentaSOAT.numDoc}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="N° Documento" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.numDoc}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemPostVentaSOAT.estado}"
								sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Estado" />
								</f:facet>
								<center>
									<h:outputText value="#{itemPostVentaSOAT.estado}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="7.5%" sortable="true" sortIconAscending="dataTableAscIcon" 
								sortIconDescending="dataTableDescIcon">
								<f:facet name="header">
									<h:outputText value="Ver Detalle" />
								</f:facet>
								<center>
<!-- 									<a4j:commandLink action="#{postVentaSOATController.cargarPagVerDetalle(itemPostVentaSOAT.id)}"   -->
<!-- 										reRender="tituloCabecera, panelStep1, panelStep2" render="true"> -->
<!-- 										<h:graphicImage url="/imagenes/Zoom-icon.png" /> -->
<!-- 									</a4j:commandLink> -->
									
									<h:commandLink action="#{postVentaSOATController.cargarPagVerDetalle}">
										<f:param value="#{itemPostVentaSOAT.id}" name="ventaID" />										
										<h:graphicImage url="/imagenes/Zoom-icon.png" />
									</h:commandLink>
<!-- 									rendered="true"> -->
									
								</center>
							</rich:column>
							<f:facet name="footer">
								<rich:datascroller id="ds" for="lista" rows="12" />
							</f:facet>
						</rich:extendedDataTable>
					</div>
					<div style="margin: auto; text-align: center; font-weight: bold; padding: 12px 10px 0px;">
						<h:outputText id="numRegEncontrados" value="N° de Registros encontrados: #{postVentaSOATController.nroRegistros}" />
					</div>
				</rich:panel>	
			</div>
			<a4j:region>
				<div style="margin: auto; text-align: right; padding-top: 10px;">
					<h:commandButton id="exportar" action="#{postVentaSOATController.exportar}" value="> Exportar" disabled="#{postVentaSOATController.disabledBtnExportar}"/>
				</div>
			</a4j:region>
		</h:form>
	</body>
</html>
