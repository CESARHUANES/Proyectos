<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="manMarcaModeloController" />
	
	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
		<style type="text/css">
			body, html {
				font-family: Monaco, Georgia, Times, serif;
			}
			
			#panelPrincipal {
				text-align: left;
			}
			
			#imgReiniciar {
				width: 12px;
				height: 12px;
				margin: 0;
				padding: 0;
			}
			
			.reiniciarLink {
				text-decoration: none;
				margin-left: 10px;
				display: inline;
			}
			
			#formManMarcaModelo {
				width: 97%;
				margin: 0 auto;
			}
			
			.separatorLine {
				width: 100%; 
				border-top: 1px solid #C0C0C0; 
				margin: 5px 0;
			}
		</style>
	</head>
	<body>
		<rich:panel id="panelPrincipal">
			<f:facet name="header">
				<h:form>
					<h:outputText id="tituloCabecera" value=" Suscripción > Mantenimiento Marca - Modelo" />
					<a4j:commandLink id="reiniciar"	action="#{manMarcaModeloController.inicio}" reRender="principal" styleClass="reiniciarLink">
						<img id="imgReiniciar" src="#{facesContext.externalContext.requestContextPath}/imagenes/refresh.png" />
					</a4j:commandLink>
				</h:form>
			</f:facet>
			<center>
				<fieldset id="formManMarcaModelo">
					<h:form>
						<div style="text-align: center;">
							<table style="padding: 15px 0px; margin:auto; width: 100%;" border="0">							
								<tr>
									<td style="text-align: right; width: 30%;">
										<rich:message for="idCategoriaClase" style="color: red;">
											<f:facet name="errorMarker">
												<h:graphicImage url="../imagenes/error.png" />
											</f:facet>
										</rich:message>
										<rich:spacer width="5" /><h:outputText value="* Categoría: " />
									</td>
									<td style="text-align: left; width: 18%;">
										<h:selectOneMenu id="idCategoriaClase" value="#{manMarcaModeloController.idCategoriaClase}" style=" width: 150px;" 
											valueChangeListener="#{manMarcaModeloController.buscarMarcaVehiculo}" required="false" requiredMessage="">
											<f:selectItems value="#{manMarcaModeloController.comboListaCategoria}" />
											<a4j:support reRender="idMarcaVehiculo, flagMarcaVehiNuevo, nombreMarcaVehiNuevo, nombreModeloVehiNuevo, registrarNuevo" 
												event="onchange" ajaxSingle="true" />
										</h:selectOneMenu>
									</td>
									<td>&nsp;</td>
									<td>&nsp;</td>
									<td>&nsp;</td>
								</tr>
								<tr>
									<td colspan="5" style="padding-top: 15px;">
										<div class="separatorLine" />
									</td>
								</tr>
								<tr>
									<td style="text-align: right; width: 30%;">
										<rich:message for="idMarcaVehiculo" style="color: red;">
											<f:facet name="errorMarker">
												<h:graphicImage url="../imagenes/error.png" />
											</f:facet>
											
										</rich:message>
										<rich:spacer width="5" />
										<h:outputText value="* Marca: " />
									</td>
									<td style="text-align: left; width: 18%;">
										<h:selectOneMenu id="idMarcaVehiculo" value="#{manMarcaModeloController.idMarcaVehiculo}" style=" width: 150px;"
											valueChangeListener="#{manMarcaModeloController.habilitarModeloVehiculoNuevo}" immediate="true"  required="true" requiredMessage=""
											disabled="#{manMarcaModeloController.disabledComboListaMarca}" >
											<f:selectItems value="#{manMarcaModeloController.comboListaMarca}" />
											<a4j:support event="onchange" ajaxSingle="true" reRender="nombreModeloVehiNuevo" />
										</h:selectOneMenu>
									</td>
									<td style="text-align: left; width: 1%;">
										<h:selectBooleanCheckbox id="flagMarcaVehiNuevo" value="#{manMarcaModeloController.flagMarcaVehiNuevo}" 
											valueChangeListener="#{manMarcaModeloController.habilitarMarcaVehiculoNuevo}" immediate="true"
											disabled="#{manMarcaModeloController.disabledFlagMarcaVehiNuevo}" >
											<a4j:support event="onchange" ajaxSingle="true" reRender="idMarcaVehiculo, nombreMarcaVehiNuevo, nombreModeloVehiNuevo" />
										</h:selectBooleanCheckbox>
									</td>
									<td style="text-align: left; width: 4%;">
										<h:outputText value="* Nuevo" />
									</td>
									<td style="text-align: left;">
										<h:inputText id="nombreMarcaVehiNuevo" onkeyup="value=value.toUpperCase()" value="#{manMarcaModeloController.nombreMarcaVehiNuevo}" style="width: 145px; float: left;" maxlength="100" 
											 onkeypress="return valRegExpEspeciales(event);"  disabled="#{manMarcaModeloController.disabledMarcaVehiNuevo}" required="true" requiredMessage="" />
									<rich:message for="nombreMarcaVehiNuevo" style="color: red;">
											<f:facet name="errorMarker">
												<h:graphicImage url="../imagenes/error.png" />
											</f:facet>
										</rich:message>
										
									</td>
									
								</tr>
								<tr>
									<td style="text-align: right; width: 30%;">
										<rich:message for="nombreModeloVehiNuevo" style="color: red;">
											<f:facet name="errorMarker">
												<h:graphicImage url="../imagenes/error.png" />
											</f:facet>
										</rich:message>
										<rich:spacer width="5" /><h:outputText value="* Modelo: " />
									</td>
									<td style="text-align: left; width: 18%;">
										<h:inputText id="nombreModeloVehiNuevo" onkeyup="value=value.toUpperCase()" value="#{manMarcaModeloController.nombreModeloVehiNuevo}" style="width: 145px; float: left;" maxlength="100" 
											 onkeypress="return valRegExpEspeciales(event);" disabled="#{manMarcaModeloController.disabledModeloVehiNuevo}" required="true" requiredMessage="" />
									</td>
									<td>&nsp;</td>
									<td>&nsp;</td>
									<td>&nsp;</td>
								</tr>
							</table>
							<div style="padding-bottom: 20px;">
								<a4j:commandButton id="registrarNuevo" action="#{manMarcaModeloController.registrarMarcaModelo}" value="Registrar" onclick="this.disabled=true"
									oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelSuccess\'); this.disabled=false;' : 'this.disabled=false;'}" 
									disabled="#{manMarcaModeloController.disabledRegistrarNuevo}" reRender="nombreMarcaVehiNuevo, nombreModeloVehiNuevo, panelSuccess" render="true" />
							</div>
						</div>
						
						
					</h:form>
				</fieldset>
			</center>
		</rich:panel>
		
		<rich:modalPanel id="panelSuccess" width="250" height="130">
			<f:facet name="header">
				<h:outputText value="Mensaje" />
			</f:facet>
			<h:panelGroup>
				<h:form>
				<center>
					<h5>
						<h:outputText value="#{manMarcaModeloController.mensajeRegistro}" />
					</h5>
					<h:commandButton action="#{manMarcaModeloController.inicio}" value="Aceptar" render="true" />
				</center>
				</h:form>
			</h:panelGroup>
		</rich:modalPanel>
		
		<script type="text/javascript" language="javascript">		
			function valRegExpEspeciales(evt){
				
					var respuesta = true;
					//evt = window.event || evt;
					evt = e ? e : event;
					var key = window.Event ? evt.which : evt.keyCode;
					var charCode = evt.which || evt.keyCode;
					var charStr = String.fromCharCode(charCode);

					var extraCaracteres = /[A-z\\s-ñáéíóúÑÁÉÍÓÚ.:0-9]/
					// /[A-z\\s-ñáéíóúÑÁÉÍÓÚ.:0-9]/i.test(charStr)
					if (evt.keyCode==8 || evt.keyCode==46 ||  evt.keyCode==32) {
						respuesta = true;   
					}else{
						respuesta = false;
					}

				
					
					return respuesta;

			}
			
		</script>
		
		
	</body>
</html>