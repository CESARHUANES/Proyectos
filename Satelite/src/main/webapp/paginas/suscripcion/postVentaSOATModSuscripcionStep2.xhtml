<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="postVentaSOATController" />
	
	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
		<style type="text/css">
			.margenPagina {
				width: 1020px;
				margin: auto;
			}
			
			.textoDerechaBold {
				text-align: right;
				font-weight: bold;
			}
			
			.textoIzquierdaBold {
				text-align: left;
				font-weight: bold;
			}
		</style>
	</head>
	<body>
		<div class="margenPagina">
			<h:form id="formPostVentaSOATStep2_A">
				<table style="width: 100%;">
					<tr>
						<td colspan="4" class="textoIzquierdaBold">
							<h:outputText value="Socio:" />
							<rich:spacer width="10px"/><h:outputText id="socioProductoVD" value="#{postVentaSOATController.socioProductoVD}" />
						</td>
						<td>&nsp;</td>
						<td>&nsp;</td>
						<td colspan="2" class="textoDerechaBold">
							<h:outputText value="N° Póliza:" />
							<rich:spacer width="10px"/><h:outputText id="nroPolizaVD" value="#{postVentaSOATController.nroPolizaVD}" />
						</td>
					</tr>
					<tr style="height: 25px;"><td/></tr>
				</table>
				<rich:panel id="componentes" style="margin: 0;">
					<table style="width: 100%;">
						<tr style="height: 10px;"><td/></tr>
						<tr>
							<td colspan="8">
								<h:outputText value="Datos del Vehículo" style="text-align: left; font-weight: bold;" />
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Nro. Placa:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="numPlacaVD" value="#{postVentaSOATController.numPlacaVD}" style="width: 80px; float: left;" maxlength="7" 
									onkeypress="return valNumerosLetrasNoEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Nro. Serie:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="numSerieVD" value="#{postVentaSOATController.numSerieVD}" style="width: 145px; float: left;" 
									onkeypress="return valNumerosLetrasNoEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 16%;">
								<h:outputText value="Nro. Asientos: " />
							</td>
							<td style="text-align: left;">
								<h:inputText id="numAsientosVD" value="#{postVentaSOATController.numAsientosVD}" style="width: 50px; float: left;" maxlength="2" 
									onkeypress="return valNumerosNoEspacio(event);" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Año Fab.:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="anioFabVD" value="#{postVentaSOATController.anioFabVD}" style="width: 50px; float: left;" maxlength="4" 
									onkeypress="return valNumerosNoEspacio(event);" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Categoría / Clase:" />
							</td>
							<td style="text-align: left;">
								<h:selectOneMenu id="idCategoriaClaseVD" value="#{postVentaSOATController.idCategoriaClaseVD}" style="width: 150px;" 
									valueChangeListener="#{postVentaSOATController.buscarMarcaVehiculo}" disabled="#{postVentaSOATController.disabledComponentes}">
									<f:selectItems value="#{postVentaSOATController.comboListaCategoria}"/>
									<a4j:support event="onchange" ajaxSingle="true" reRender="idMarcaVehiculoVD, idModeloVehiculoVD" />
								</h:selectOneMenu>
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Uso:" />
							</td>
							<td style="text-align: left;">
								<h:selectOneMenu id="idUsoVehiculoVD" value="#{postVentaSOATController.idUsoVehiculoVD}" style="width: 150px;" 
									disabled="#{postVentaSOATController.disabledComponentes}">
									<f:selectItems value="#{postVentaSOATController.comboListaUsoVehiculo}"/>
								</h:selectOneMenu>
							</td>
							<td style="text-align: right; width: 16%;">
								<h:outputText value="Marca:" />
							</td>
							<td style="text-align: left;">
								<h:selectOneMenu id="idMarcaVehiculoVD" value="#{postVentaSOATController.idMarcaVehiculoVD}" style="width: 150px;" 
									valueChangeListener="#{postVentaSOATController.buscarModeloVehiculo}" disabled="#{postVentaSOATController.disabledComponentes}">
									<f:selectItems value="#{postVentaSOATController.comboListaMarca}"/>
									<a4j:support event="onchange" ajaxSingle="true" reRender="idModeloVehiculoVD"/>
								</h:selectOneMenu>
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Modelo:" />
							</td>
							<td style="text-align: left;">
								<h:selectOneMenu id="idModeloVehiculoVD" value="#{postVentaSOATController.idModeloVehiculoVD}" style="width: 150px;" 
									disabled="#{postVentaSOATController.disabledComponentes}">
									<f:selectItems value="#{postVentaSOATController.comboListaModelo}" />
								</h:selectOneMenu>
							</td>
						</tr>
						<tr>
							<td colspan="8">
								<div class="separatorLine2" />
							</td>
						</tr>
						<tr>
							<td colspan="8">
								<h:outputText value="Datos del Propietario" style="text-align: left; font-weight: bold;" />
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Tipo. Doc.:" />
							</td>
							<td style="text-align: left;">
								<h:selectOneMenu id="idTipoDocVD" value="#{postVentaSOATController.idTipoDocVD}" style="width: 150px;"
									disabled="#{postVentaSOATController.disabledComponentes}">
									<f:selectItems value="#{postVentaSOATController.comboListaTipoDoc}" />
								</h:selectOneMenu>
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Nro. Doc.:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="numDocumentoVD" value="#{postVentaSOATController.numDocumentoVD}" style="width: 145px; float: left;" maxlength="12"
									onkeypress="return valNumerosNoEspacio(event);" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 16%;">
								<h:outputText value="Fecha. Nac.:" />
							</td>
							<td style="text-align: left;">
								<rich:calendar id="fecNacimientoVD" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" inputStyle="width: 125px;"
									value="#{postVentaSOATController.fecNacimientoVD}" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Sexo:" />
							</td>
							<td style="text-align: left;">
								<h:selectOneMenu id="idSexoVD" value="#{postVentaSOATController.idSexoVD}" style="width: 150px;" disabled="#{postVentaSOATController.disabledComponentes}">
									<f:selectItems value="#{postVentaSOATController.comboListaSexo}" />
								</h:selectOneMenu>
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Ape. Paterno:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="apePaternoVD" value="#{postVentaSOATController.apePaternoVD}" style="width: 145px; float: left;" 
									onkeypress="return valLetrasSiEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Ape. Materno:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="apeMaternoVD" value="#{postVentaSOATController.apeMaternoVD}" style="width: 145px; float: left;" 
									onkeypress="return valLetrasSiEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 16%;">
								<h:outputText value="Nombres:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="nombresVD" value="#{postVentaSOATController.nombresVD}" style="width: 145px; float: left;" 
									onkeypress="return valLetrasSiEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="#{postVentaSOATController.disabledComponentes}"/>
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td colspan="8">
								<div class="separatorLine2" />
							</td>
						</tr>
						<tr>
							<td colspan="8">
								<h:outputText value="Datos de la Póliza" style="text-align: left; font-weight: bold;" />
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Prima Bruta:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="primaBrutaVD" value="#{postVentaSOATController.primaBrutaVD}" style="width: 60px; float: left; font-weight: bold;" maxlength="8"
									onkeypress="return valDecimales(event);"  render="true" disabled="#{postVentaSOATController.disabledprimaBrutaVD}">
									<f:convertNumber pattern="#,##0.00" locale="en_US" />
								</h:inputText>
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Fec. Inicio Vigencia:" />
							</td>
							<td style="text-align: left;">
								<rich:calendar id="fecIniVigenciaVD" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" inputStyle="width: 125px;"
									value="#{postVentaSOATController.fecIniVigenciaVD}" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td style="text-align: right; width: 16%;">
								<h:outputText value="Fec. Fin Vigencia:" />
							</td>
							<td style="text-align: left;">
								<rich:calendar id="fecFinVigenciaVD" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" inputStyle="width: 125px;"
									value="#{postVentaSOATController.fecFinVigenciaVD}" disabled="#{postVentaSOATController.disabledComponentes}" />
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Fec. Venta:" />
							</td>
							<td style="text-align: left;">
								<rich:calendar id="fecVentaVD" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" inputStyle="width: 125px; font-weight: bold;"
									value="#{postVentaSOATController.fecVentaVD}" render="true" disabled="#{postVentaSOATController.disabledfecVentaVD}" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Canal Venta:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="canalVentaVD" value="#{postVentaSOATController.canalVentaVD}" style="width: 145px; float: left; font-weight: bold;" maxlength="50"
									onkeypress="return valLetrasNoEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="true" />
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Nro. Certificado:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="nroCertificadoVD" value="#{postVentaSOATController.nroCertificadoVD}" style="width: 100px; float: left; font-weight: bold;" maxlength="12"
									onkeypress="return valNumerosNoEspacio(event);" disabled="true" />
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Nro. Certificado Ant:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="nroCertificadoAntVD" value="#{postVentaSOATController.nroCertificadoAntVD}" style="width: 100px; float: left; font-weight: bold;" maxlength="12"
									onkeypress="return valNumerosNoEspacio(event);" disabled="true" />
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Estado:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="estadoVD" value="#{postVentaSOATController.estadoVD}" style="width: 145px; float: left; font-weight: bold;" disabled="true" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Estado Impresión:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="estadoImpVD" value="#{postVentaSOATController.estadoImpVD}" style="width: 145px; float: left; font-weight: bold;" disabled="true" />
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Motivo:" />
							</td>
							<td style="text-align: left;">
								<h:inputText id="motivoVD" value="#{postVentaSOATController.motivoVD}" style="width: 145px; float: left; font-weight:bold;" disabled="true" />
							</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td style="text-align: right;">
								<h:outputText value="Reportado APESEG" />
								<h:selectBooleanCheckbox id="opcionApesegVD" value="#{postVentaSOATController.opcionApesegVD == 'SI' ? true : false}" disabled="true" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Fecha:" />
							</td>
							<td style="text-align: left;">
								<rich:calendar id="fecReporteApesegVD" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" 
									value="#{postVentaSOATController.fecReporteApesegVD}" inputStyle="width: 125px; font-weight: bold;" disabled="true" />
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 23%;">
								<h:outputText value="Observación:" />
							</td>
							<td colspan="3" style="text-align: left;">
								<h:inputTextarea id="observacionVD" value="#{postVentaSOATController.observacionVD}" style="width: 405px; height: 45px; resize: none; font-weight:bold;" 
									onkeypress="return valNumerosLetrasSiEspacio(event);" onkeyup="value=value.toUpperCase();" disabled="true" />
							</td>
							<td>&nbsp;</td>
							<td style="text-align: right;">
								<h:outputText value="Reportado SBS" />
								<h:selectBooleanCheckbox id="opcionSbsVD" value="#{postVentaSOATController.opcionSbsVD == 'SI' ? true : false}" disabled="true" />
							</td>
							<td style="text-align: right; width: 15%;">
								<h:outputText value="Fecha:" />
							</td>
							<td style="text-align: left;">
								<rich:calendar id="fecReporteSbsVD" enableManualInput="false" showWeeksBar="false" datePattern="yyyy-MM-dd" 
									value="#{postVentaSOATController.fecReporteSbsVD}" inputStyle="width: 125px; font-weight: bold;" disabled="true" />
							</td>
						</tr>
					</table>
				</rich:panel>
				
				<table style="width: 100%; padding: 10px 12px 0px;">
					<tr>
						<td>&nbsp;</td>
						<td style="text-align: right;">
							<a4j:commandButton id="editar" action="#{postVentaSOATController.procesoEditarPoliza}" value="> Editar" 
								reRender="componentes, editar, actualizar, re-imprimir, anular, verCertificado, confirmarCert" render="true" disabled="#{postVentaSOATController.disabledBtnEditar}" />
							<a4j:commandButton id="actualizar" action="#{postVentaSOATController.procesoActualizarPoliza}"  value="> Actualizar" 
								reRender="componentes, editar, actualizar, re-imprimir, anular" render="true" disabled="#{postVentaSOATController.disabledBtnActualizar}" />
							<a4j:commandButton id="re-imprimir" action="#{postVentaSOATController.cargarReimprimirPoliza}" value="> Re-Imprimir" 
								oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelReimprimirPolizaSOAT\')' : ';'}"	
								reRender="panelReimprimirPolizaSOAT" render="true" disabled="#{postVentaSOATController.disabledBtnReimprimir}" />
							<a4j:commandButton id="anular" action="#{postVentaSOATController.cargarAnularPoliza}" value="> Anular" 
								oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelAnularPolizaSOAT\')' : ';'}"	
								reRender="panelAnularPolizaSOAT" render="true" disabled="#{postVentaSOATController.disabledBtnAnular}" />
						</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td style="text-align: right;">
							<h:commandButton id="verCertificado" action="#{postVentaSOATController.descargarPDFPolizaSOAT}" value="> Ver Certificado" 
								style="display: #{postVentaSOATController.shownBtnPostReimprimir ? 'inherit' : 'none'}" />
							<a4j:commandButton id="confirmarCert" action="#{postVentaSOATController.procesoConfirmarCertificado}" value="> Confirmar Certificado" 
								style="display: #{postVentaSOATController.shownBtnPostReimprimir ? 'inherit' : 'none'}" 
								reRender="componentes, editar, actualizar, re-imprimir, anular, verCertificado, confirmarCert" render="true" />
						</td>
					</tr>
				</table>
			</h:form>
			
			<h:form id="formPostVentaSOATStep2_B">
				<div style="padding-left: 15px; position: absolute; top: 639px;">
					<a4j:commandButton id="volverPrincipal" action="#{postVentaSOATController.volverPantallaPrincipal}" value="> Volver" 
						reRender="panelStep1, panelStep2, tituloCabecera" render="true" />
				</div>
			</h:form>
		</div>
	</body>
	
	<rich:modalPanel id="panelReimprimirPolizaSOAT" autosized="true">
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/imagenes/close.gif" styleClass="hidelink" id="hidelink01" />
				<rich:componentControl for="panelReimprimirPolizaSOAT" attachTo="hidelink01" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>
		<h:form>
			<a4j:region>
				<a4j:include viewId="/paginas/suscripcion/reimprimirPolizaPostVSOATPopup.xhtml" />
			</a4j:region>
		</h:form>
	</rich:modalPanel>
	
	<rich:modalPanel id="panelAnularPolizaSOAT" autosized="true">
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/imagenes/close.gif" styleClass="hidelink" id="hidelink02" />
				<rich:componentControl for="panelAnularPolizaSOAT" attachTo="hidelink02" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>
		<h:form>
			<a4j:region>
				<a4j:include viewId="/paginas/suscripcion/anularPolizaPostVSOATPopup.xhtml" />
			</a4j:region>
		</h:form>
	</rich:modalPanel>
</html>
