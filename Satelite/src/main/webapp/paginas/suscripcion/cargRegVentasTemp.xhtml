<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich">
<a4j:keepAlive beanName="cargRegVentasTempController" />
<head>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js"></script>
</head>
<body>
	<h:form id="loadBooksForm">
		<rich:panel id="registro">
			<f:facet name="header">
				<h:outputText value="Suscripción >  Registro de Ventas > Carga del Registro de Ventas" />
			</f:facet>
			<table align="center">
				<tr>
					<td align="right"><h:outputText value="* Periodo (AAAAMM): " /></td>
					<td align="left"><h:inputText id="periodo" value="#{cargRegVentasTempController.periodo}" maxlength="6" required="true"
							requiredMessage="El periodo es obligatorio" onkeypress="return valNumeros(event);">
						</h:inputText> <rich:message for="periodo" style="color:RED;">
							<f:facet name="errorMarker">
								<h:graphicImage url="../imagenes/error.png" />
							</f:facet>
						</rich:message></td>
				</tr>
				<tr>
					<td colspan="2" align="center"><h:commandButton action="#{cargRegVentasTempController.limpiar}" immediate="true" value="Limpiar" /></td>
				</tr>
				<tr>
					<td colspan="2" height="10px"></td>
				</tr>
				<tr>
					<td colspan="2" align="center"><rich:fileUpload id="uploader" align="left" disabled="#{cargRegVentasTempController.upload}"
							fileUploadListener="#{cargRegVentasTempController.listener}" autoclear="false" acceptedTypes="xlsx" maxFilesQuantity="1" allowFlash="false"
							addControlLabel="Seleccionar Archivo .xlsx" clearAllControlLabel="Limpiar" clearControlLabel="" stopEntryControlLabel="Detener Proceso"
							uploadControlLabel="Cargar Archivo" value="{_MB}MB from {MB}MB cargando --- {mm}:{ss}">
							<a4j:support event="onclear" action="#{cargRegVentasTempController.clear}" />
						</rich:fileUpload></td>
				</tr>
				<tr>
					<td colspan="2" height="10px"></td>
				</tr>
				<tr>
					<td align="center" colspan="2"><a4j:commandButton value="Procesar Registro de Ventas" action="#{cargRegVentasTempController.procesar}"
							onclick="if(!confirm('Esta seguro que desea Continuar?\n\nAsegúrece que el archivo cargado\ntenga el formato correcto si es asi\npuede continuar.')){return false;}"
							oncomplete="#{facesContext.maximumSeverity == null ? 'Richfaces.showModalPanel(\'cargando\');this.disabled=false;' :
						'this.disabled=false;'}" />
					</td>
				</tr>
			</table>

		</rich:panel>

	</h:form>
</body>
<rich:modalPanel id="procesando" width="130" height="70">
	<f:facet name="header">
		<h:outputText value="Procesando... " />
	</f:facet>
	<h:form>
		<img src="#{facesContext.externalContext.requestContextPath}/imagenes/cargando.gif"></img>
	</h:form>
</rich:modalPanel>
<rich:modalPanel id="cargando" width="250" height="130">
	<f:facet name="header">Informativo</f:facet>
	<h:panelGroup>
		<center>
			<h5>El proceso se está ejecutando, consulte en la tabla de procesos.</h5>
			<a4j:commandButton value="Aceptar" onclick="#{rich:component('cargando')}.hide();return false" />
			<rich:componentControl for="cargando" attachTo="hidelink" operation="hide" event="onclick"></rich:componentControl>
		</center>
	</h:panelGroup>
</rich:modalPanel>
<rich:modalPanel id="existe" width="250" height="130">
	<f:facet name="header">Informativo</f:facet>
	<h:panelGroup>
		<center>
			<h5>El periodo ingresado ya fue cargado anteriormente.</h5>
			<a4j:commandButton value="Aceptar" onclick="#{rich:component('existe')}.hide();return false" />
			<rich:componentControl for="existe" attachTo="hidelink" operation="hide" event="onclick"></rich:componentControl>
		</center>
	</h:panelGroup>
</rich:modalPanel>
</html>