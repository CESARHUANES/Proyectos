<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
</head>  
<body>
	<h:form>
		<center>
			<rich:panel id="consultar" height="100%">
				<f:facet name="header">
					<h:outputText value="Suscripción > SOAT > Impresion SOAT Empleados" />
				</f:facet>
				<br></br>
				<table>
					<tr>
						<td width="280"><h:outputText value="Razón Social: " /> <h:selectOneMenu id="sucursal" value="#{impresionSoatController.razonSocial}"
								style=" width : 150px;">
								<f:selectItems value="#{impresionSoatController.listaRazonSocialItem}" />
								<a4j:support event="onchange" ajaxOnly="true" />
							</h:selectOneMenu></td>

						<td width="250"><h:outputText value="Fec. Compra:   Desde " /> <rich:calendar id="desde" style=" width : 140px;" enableManualInput="false"
								datePattern="dd/MM/yyyy" value="#{impresionSoatController.fechaCompaDesde}" showWeeksBar="false" required="false" requiredMessage="">
							</rich:calendar> <rich:message for="desde" style="color: red;">
								<f:facet name="errorMarker">
									<h:graphicImage url="../imagenes/error.png" />
								</f:facet>
							</rich:message></td>


						<td width="200"><h:outputText style="font-size:11px;" value="Hasta " /> <rich:calendar id="hasta" style=" width : 140px;"
								enableManualInput="false" datePattern="dd/MM/yyyy" value="#{impresionSoatController.fechaCompaHasta}" showWeeksBar="false" required="false"
								requiredMessage="">
							</rich:calendar> <rich:message for="hasta" style="color: red;">
								<f:facet name="errorMarker">
									<h:graphicImage url="../imagenes/error.png" />
								</f:facet>
							</rich:message></td>




					</tr>
				</table>
				<br></br>
				<br></br>
				<table align="center">
					<tr>
						<td align="center" width="200" style="width: 203px;"><a4j:commandButton action="#{impresionSoatController.buscar}" value="Buscar"
								reRender="lista" style=" width : 80px;" /></td>
						<td align="center"><a4j:commandButton id="btnModificar" action="#{impresionSoatController.mostrar}"
								oncomplete="#{facesContext.maximumSeverity == null ? 'Richfaces.showModalPanel(\'panelDetalle\')' : ';'}" value="Modificar"
								reRender="panelDetalle" style="width:80px;" /></td>
					</tr>
				</table>



				<br></br>

				<rich:extendedDataTable id="lista" var="soat" value="#{impresionSoatController.listaPolizas}" width="940px" rows="14" height="373px"
					selection="#{impresionSoatController.selection}" selectionMode="single">
					<rich:column id="tipo" width="80px">
						<f:facet name="header">
							<h:outputText value="Nro. Poliza" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.nroPoliza}" />
						</center>
					</rich:column>
					<rich:column id="fechaIni" width="70px">
						<f:facet name="header">
							<h:outputText value="Fec. Inicio Vig." />
						</f:facet>
						<center>
							<h:outputText value="#{soat.fecIniVig}">
								<f:convertDateTime timeZone="America/Lima" pattern="dd/MM/yyyy"></f:convertDateTime>
							</h:outputText>
						</center>
					</rich:column>

					<rich:column id="fechaFin" width="70px">
						<f:facet name="header">
							<h:outputText value="Fec. Fin Vig." />
						</f:facet>
						<center>
							<h:outputText value="#{soat.fecFinVig}">
								<f:convertDateTime timeZone="America/Lima" pattern="dd/MM/yyyy"></f:convertDateTime>
							</h:outputText>
						</center>
					</rich:column>

					<rich:column id="nomEmpleado" width="190px">
						<f:facet name="header">
							<h:outputText value="Empleado" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.nomEmpl} #{soat.apePatempl} #{soat.apeMatempl}"></h:outputText>
						</center>
					</rich:column>

					<rich:column id="nomContrat" width="190px">
						<f:facet name="header">
							<h:outputText value="Contratante" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.nomContrat} #{soat.apePatcontrat} #{soat.apeMatcontrat}"></h:outputText>
						</center>
					</rich:column>
					<rich:column id="fecCompra" width="80px">
						<f:facet name="header">
							<h:outputText value="Fec. Compra" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.fecCreacion}">
								<f:convertDateTime timeZone="America/Lima" pattern="dd/MM/yyyy"></f:convertDateTime>
							</h:outputText>
						</center>
					</rich:column>


					<rich:column id="espValorada" width="80px">
						<f:facet name="header">
							<h:outputText value="N° Esp. Valorada" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.nroEspValorada}">

							</h:outputText>
						</center>
					</rich:column>
					<rich:column id="estado" width="80px">
						<f:facet name="header">
							<h:outputText value="Estado" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.estado}">
							</h:outputText>
						</center>
					</rich:column>

					<rich:column id="codigoRazonSocial" width="100px">
						<f:facet name="header">
							<h:outputText value="Razon Social" />
						</f:facet>
						<center>
							<h:outputText value="#{soat.razonSocial}">
							</h:outputText>
						</center>
					</rich:column>
					<f:facet name="footer">
						<rich:datascroller id="ds" for="lista" maxPages="10"></rich:datascroller>
					</f:facet>
				</rich:extendedDataTable>
			</rich:panel>
			<table>
				<tr>
					<td style="height: 10px;"></td>
				</tr>
				<tr>
					<td><h:commandButton action="#{impresionSoatController.imprimir}" value="Imprimir" /></td>
					<td><h:commandButton action="#{impresionSoatController.exportar}" value="Exportar" /></td>
				</tr>
			</table>
		</center>
	</h:form>
</body>

<rich:modalPanel id="panelDetalle" autosized="true">
	<f:facet name="header">
		<h:outputText value="SOAT Empleados > Modificar" />
	</f:facet>
	<f:facet name="controls">
		<h:panelGroup>
			<h:graphicImage value="/imagenes/close.gif" styleClass="hidelink" id="hidelink" />
			<rich:componentControl for="panelDetalle" attachTo="hidelink" operation="hide" event="onclick" />
		</h:panelGroup>
	</f:facet>
	<a4j:region>
		<a4j:include viewId="/paginas/suscripcion/conSoatModificar.xhtml" />
	</a4j:region>

</rich:modalPanel>
</html>