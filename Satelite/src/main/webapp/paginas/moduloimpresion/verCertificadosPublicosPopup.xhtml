<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="configCertificadoController" />
	
	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
		<style type="text/css">
			body {
				font-family: Monaco, Georgia, Times, serif;
			}
			
			#formVerCertificadosPublicos {
				background-color: #fff;
				margin-top: 10px;
			}
			
			.separador {
				padding: 10px 0px;
				float: right;
			}
			
		</style>
	</head>
	<body>
		<h:form>
			<rich:panel id="panVerCertPublicos" height="100%" style="padding-bottom: 30px;">
				<f:facet name="header">
					<h:outputText value="Impresión > Configurar Certificado > Certificados Públicos Disponibles" />
				</f:facet>
				<fieldset id="formVerCertificadosPublicos">
					<rich:extendedDataTable id="listaCertificadosPublicos" var="itemCertPublicos" value="#{configCertificadoController.listaCertificadosPublicos}" 
						style="width:380px; height: 220px !important;" selectionMode="single">
						<rich:column headerClass="dataTableHeader" witdh="8%" sortable="true">
							<f:facet name="header">
								<h:outputText value="Eliminar" />
							</f:facet>
							<center>
								<h:selectBooleanCheckbox id="selected" value="#{itemCertPublicos.deleted}" immediate="true" />
							</center>
						</rich:column>
						<rich:column id="nroCertificadoPub" headerClass="dataTableHeader" width="72.5%" sortable="true" 
							sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
							<f:facet name="header">
								<h:outputText value="N° Certificados Públicos" />
							</f:facet>
							<center>
								<h:outputText value="#{itemCertPublicos.numCertificado}#{itemCertPublicos.tipoCertificado}#{itemCertPublicos.anio}" />
							</center>
						</rich:column>			
					</rich:extendedDataTable>
					<a4j:status onstart="Richfaces.showModalPanel('ajaxLoadingModalBox')" onstop="Richfaces.hideModalPanel('ajaxLoadingModalBox')" />
				</fieldset>
				<span class="separador">
					<a4j:commandButton action="#{configCertificadoController.eliminarCertificadosPublicos}" onclick="this.disabled=true;" value="Eliminar" 
						oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelSuccessVerCertPub\');this.disabled=false' : 'this.disabled=false;'}"
						reRender="listaCertificadosPublicos, numCertificadosPublicos" render="true"/> 						
				</span>
			</rich:panel>
		</h:form>
		
		<rich:modalPanel id="ajaxLoadingModalBox" width="100" height="95">
			<center>
				<img src="#{facesContext.externalContext.requestContextPath}/imagenes/loading.gif"></img><br />
				<h:outputText value="Cargando..." />
			</center>
		</rich:modalPanel>
		
		<rich:modalPanel id="panelSuccessVerCertPub" width="250" height="130">
			<f:facet name="header">
				<h:outputText value="Mensaje" />
			</f:facet>
			<h:panelGroup>
				<center>
					<h5>
						<h:outputText value="Se eliminaron los certificados públicos seleccionados correctamente!" />
					</h5>
					<a4j:commandButton value="Aceptar" render="true" onclick="#{rich:component('panelSuccessVerCertPub')}.hide(); #{rich:component('panVerCertPublicos')}.hide(); return false" 
						oncomplete="#{facesContext.maximumSeverity == null ? 'Richfaces.hideModalPanel(\'panVerCertPublicos\')' : ';'}" />
					<rich:componentControl for="panVerCertPublicos" attachTo="hidelink01" operation="hide" event="onclick" />
				</center>
			</h:panelGroup>
		</rich:modalPanel>
	</body>
</html>
