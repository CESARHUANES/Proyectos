<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="configCertificadoController" />
	
	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
		<style type="text/css">
			body {
				font-family: Monaco, Georgia, Times, serif;
			}
			
			#formVerCertificadosPrivados {
				background-color: #fff;
				margin-top: 10px;
			}
			
			.separador {
				padding: 10px 0px;
				float: right;
			}
		</style>
	</head>
	<body>
		<h:form>
			<rich:panel id="panVerCertPrivados" height="100%" style="padding-bottom:30px;">
				<f:facet name="header">
					<h:outputText value="Impresión > Configurar Certificado > Certificados Privados Disponibles" />
				</f:facet>
				<fieldset id="formVerCertificadosPrivados">
					<rich:extendedDataTable id="listaCertificadosPrivados" var="itemCertPrivados" value="#{configCertificadoController.listaCertificadosPrivados}" 
						style="width:380px; height: 220px !important;" selectionMode="single"  >
						<rich:column headerClass="dataTableHeader" witdh="8%" sortable="true" >
							<f:facet name="header">
								<h:outputText value="Eliminar" />
							</f:facet>
							<center>
								<h:selectBooleanCheckbox id="selected" value="#{itemCertPrivados.deleted}" immediate="true" />
							</center>
						</rich:column>
						<rich:column id="nroCertificadoPri" headerClass="dataTableHeader" width="72.5%" sortable="true" 
							sortIconAscending="dataTableAscIcon" sortIconDescending="dataTableDescIcon">
							<f:facet name="header">
								<h:outputText value="N° Certificados Privados" />
							</f:facet>
							<center>
								<h:outputText value="#{itemCertPrivados.numCertificado}#{itemCertPrivados.tipoCertificado}#{itemCertPrivados.anio}" />
							</center>
						</rich:column>			
					</rich:extendedDataTable>
					<a4j:status onstart="Richfaces.showModalPanel('ajaxLoadingModalBox')" onstop="Richfaces.hideModalPanel('ajaxLoadingModalBox')"></a4j:status>
				</fieldset>
				<span class="separador">
					<a4j:commandButton action="#{configCertificadoController.eliminarCertificadosPrivados}" onclick="this.disabled=true;" value="Eliminar" 
						oncomplete="#{null == facesContext.maximumSeverity ? 'Richfaces.showModalPanel(\'panelSuccessVerCertPri\');this.disabled=false' : 'this.disabled=false;'}"
						reRender="listaCertificadosPrivados, numCertificadosPrivados" render="true"/> 						
				</span>
			</rich:panel>
		</h:form>
		
		<rich:modalPanel id="ajaxLoadingModalBox" width="100" height="95">
			<center>
				<img src="#{facesContext.externalContext.requestContextPath}/imagenes/loading.gif"></img><br />
				<h:outputText value="Cargando..." />
			</center>
		</rich:modalPanel>
		<rich:modalPanel id="panelSuccessVerCertPri" width="250" height="130">
			<f:facet name="header">
				<h:outputText value="Mensaje" />
			</f:facet>
			<h:panelGroup>
				<center>
					<h5>
						<h:outputText value="Se eliminaron los certificados privados seleccionados correctamente!" />
					</h5>
					<a4j:commandButton value="Aceptar" render="true" onclick="#{rich:component('panelSuccessVerCertPri')}.hide(); #{rich:component('panVerCertPrivados')}.hide(); return false" 
						oncomplete="#{facesContext.maximumSeverity == null ? 'Richfaces.hideModalPanel(\'panVerCertPrivados\')' : ';'}" />
					<rich:componentControl for="panVerCertPrivados" attachTo="hidelink02" operation="hide" event="onclick" />
				</center>
			</h:panelGroup>
		</rich:modalPanel>
	</body>
</html>
