<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	
	<a4j:keepAlive beanName="armarLoteController" />
	
	<head>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/validacion.js" />
	</head>
	<body>
		<h:form id="frmCertificado" >
			<div class="datatable">
				<rich:panel id="pnlListaCertificado">
					<div class="extendedDTableContenido">	
						<rich:extendedDataTable id="listaCertificado" var="itemLImpresionArmado" value="#{armarLoteController.listaLoteImpresionArmado}" width="1320px" height="360px" 
							selectionMode="single" keppSaved="false">
							<rich:column id="idPoliza" headerClass="dataTableHeader" width="7.5%" sortable="true" sortBy="#{itemLImpresionArmado.nroPolizaPe}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Nª Póliza" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.nroPolizaPe}" style="#{itemLImpresionArmado.deletedCSSStyle}" />
								</center>
							</rich:column>
							<rich:column id="usoVehiculo" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{itemLImpresionArmado.usoVehiculo}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Tipo Vehículo" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.usoVehiculo}" style="#{itemLImpresionArmado.deletedCSSStyle}" />
								</center>
							</rich:column>
							<rich:column id="fechaVenta" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{itemLImpresionArmado.fecVenta}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Fecha Compra" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.fecVenta}" style="#{itemLImpresionArmado.deletedCSSStyle}">
										<f:convertDateTime pattern="yyyy-MM-dd"/>
									</h:outputText>
								</center>
							</rich:column>
							<rich:column id="departamentoDesp" headerClass="dataTableHeader" width="10.5%" sortable="true" sortBy="#{itemLImpresionArmado.departamentoDesp}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Departamento" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.departamentoDesp}" style="#{itemLImpresionArmado.deletedCSSStyle}" />
								</center>
							</rich:column>
							<rich:column id="provinciaDesp" headerClass="dataTableHeader" width="10.5%" sortable="true" sortBy="#{itemLImpresionArmado.provinciaDesp}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Provincia" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.provinciaDesp}" style="#{itemLImpresionArmado.deletedCSSStyle}" />
								</center>
							</rich:column>
							<rich:column id="distritoDesp" headerClass="dataTableHeader" width="10.5%" sortable="true" sortBy="#{itemLImpresionArmado.distritoDesp}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Distrito" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.distritoDesp}" style="#{itemLImpresionArmado.deletedCSSStyle}" />
								</center>
							</rich:column>
							<rich:column id="fechaDespacho" headerClass="dataTableHeader" width="8%" sortable="true" sortBy="#{itemLImpresionArmado.fecDespacho}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Despacho" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.fecDespacho}" style="#{itemLImpresionArmado.deletedCSSStyle}">
										<f:convertDateTime pattern="yyyy-MM-dd"/>
									</h:outputText>
								</center>
							</rich:column>
							<rich:column id="franjaHorariaDesp" headerClass="dataTableHeader" width="10%" sortable="true" sortBy="#{itemLImpresionArmado.franjaHorariaDesp}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Horario" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.franjaHorariaDesp}" style="#{itemLImpresionArmado.deletedCSSStyle}"/>
								</center>
							</rich:column>
							<rich:column id="placa" headerClass="dataTableHeader" width="6.5%" sortable="true" sortBy="#{itemLImpresionArmado.placa}" sortIconAscending="dataTableAscIcon"
								sortIconDescending="dataTableDescIcon" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Placa" />
								</f:facet>
								<center>
									<h:outputText value="#{itemLImpresionArmado.placa}" style="#{itemLImpresionArmado.deletedCSSStyle}" />
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Eliminar" />
								</f:facet>
								<center>
									<h:selectBooleanCheckbox id="idDelectedCheck" value="#{itemLImpresionArmado.deleted}" style="width: 10px" disabled="#{armarLoteController.disabledComponenteStep2}">
										<f:selectItems value="#{armarLoteController.selection}" />
										<a4j:support event="onclick" actionListener="#{armarLoteController.selectionCheckEliminarPolizaListener}" render="true"
											reRender="listaCertificado" />
									</h:selectBooleanCheckbox>
								</center>
							</rich:column>
							<rich:column headerClass="dataTableHeader" width="10.5%" style="#{itemLImpresionArmado.validatedCSSStyle};">
								<f:facet name="header">
									<h:outputText value="Nª Certificado" />
								</f:facet>
								<div style="padding-left: 8px;">
									<h:inputText id="numCertificado" value="#{itemLImpresionArmado.numCertificado}" maxlength="14" style="#{itemLImpresionArmado.deletedCSSStyle}; width:95px;" 
										onkeypress="return valNumeros(event)" disabled="#{(itemLImpresionArmado.deleted || armarLoteController.disabledComponenteStep2) ? true : false}">
									</h:inputText>
								</div>
							</rich:column>
						</rich:extendedDataTable>
					</div>
					<table class="contadorRegistros">
						<tr>
							<td style="width: 30%;" />
							<td style="width: 10%;">
								N° de Registros seleccionados: <h:outputText id="numRegSeleccionados" value="#{armarLoteController.registrosImpresion}" />
							</td>
						</tr>
					</table>
				</rich:panel>
				<span class="botonInferior">
					<a4j:commandButton id="cargarValidarCertificados" action="#{armarLoteController.procesoValidarCertificado}" value="> Validar Certificados"
						disabled="#{armarLoteController.disabledComponenteStep2 ? true : false}" render="true" reRender="pnlListaCertificado, cargarValidarCertificados, generarLote" />
					<rich:spacer width="10px"/>
					<a4j:commandButton id="generarLote" action="#{armarLoteController.procesoGenerarLote}" value="> Generar Lote"
						disabled="#{armarLoteController.disabledBtnGenerarLote}" render="true" reRender="panelStep1, panelStep2, panelStep3, tituloCabecera, numLoteGenerado, reiniciar" />
				</span>
			</div>
		</h:form>
	</body>
</html>